(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{L049:function(e,t,o){"use strict";o.r(t),o.d(t,"FaqModule",function(){return x});var r=o("ofXK"),n=o("tyNb"),a=o("PCNd"),c=o("Ydvz"),s=o("fXoL"),i=o("zg9e");let l=(()=>{class e extends c.a{}return e.\u0275fac=function(t){return p(t||e)},e.\u0275cmp=s.Ab({type:e,selectors:[["app-errors"]],features:[s.ub],decls:75,vars:0,consts:[[1,"content"],["contentReference",""],[1,"github-links"],["href","https://github.com/nestjs/docs.nestjs.com/edit/master/content/faq/errors.md","aria-label","Suggest Edits","title","Suggest Edits"],[1,"fas","fa-edit"],["id","common-errors"],["appAnchor","","id","cannot-resolve-dependency-error"],[1,"language-bash"],["href","/fundamentals/custom-providers#di-fundamentals"],["appAnchor","","id","circular-dependency-error"],["routerLink","/fundamentals/circular-dependency"]],template:function(e,t){1&e&&(s.Jb(0,"div",0,1),s.Jb(2,"div",2),s.Jb(3,"a",3),s.Hb(4,"i",4),s.Ib(),s.Ib(),s.Jb(5,"h3",5),s.lc(6,"Common errors"),s.Ib(),s.Jb(7,"p"),s.lc(8,"During your development with NestJS, you may encounter various errors as you learn the framework."),s.Ib(),s.Jb(9,"h4",6),s.Jb(10,"span"),s.lc(11,'"Cannot resolve dependency" error'),s.Ib(),s.Ib(),s.Jb(12,"p"),s.lc(13,"Probably the most common error message is about Nest not being able to resolve dependencies of a provider. The error message usually looks something like this:"),s.Ib(),s.Jb(14,"pre"),s.Jb(15,"code",7),s.lc(16,"\nNest can't resolve dependencies of the <provider> (?). Please make sure that the argument <unknown_token> at index [<index>] is available in the <module> context.\n\nPotential solutions:\n- If <unknown_token> is a provider, is it part of the current <module>?\n- If <unknown_token> is exported from a separate @Module, is that module imported within <module>?\n  @Module({\n    imports: [ /* the Module containing <unknown_token> */ ]\n  })\n"),s.Ib(),s.Ib(),s.Jb(17,"p"),s.lc(18,"The most common culprit of the error, is not having the "),s.Jb(19,"code"),s.lc(20,"provider"),s.Ib(),s.lc(21," in the module's "),s.Jb(22,"code"),s.lc(23,"providers"),s.Ib(),s.lc(24," array. Please make sure that the provider is indeed in the "),s.Jb(25,"code"),s.lc(26,"providers"),s.Ib(),s.lc(27," array and following "),s.Jb(28,"a",8),s.lc(29,"standard NestJS provider practices"),s.Ib(),s.lc(30,"."),s.Ib(),s.Jb(31,"p"),s.lc(32,"There are a few gotchas, that are common. One is putting a provider in an "),s.Jb(33,"code"),s.lc(34,"imports"),s.Ib(),s.lc(35," array. If this is the case, the error will have the provider's name where "),s.Jb(36,"code"),s.lc(37,"<module>"),s.Ib(),s.lc(38," should be."),s.Ib(),s.Jb(39,"p"),s.lc(40,"If you run across this error while developing, take a look at the module mentioned in the error message and look at its "),s.Jb(41,"code"),s.lc(42,"providers"),s.Ib(),s.lc(43,". For each provider in the "),s.Jb(44,"code"),s.lc(45,"providers"),s.Ib(),s.lc(46," array, make sure the module has access to all of the dependencies. Often times, "),s.Jb(47,"code"),s.lc(48,"providers"),s.Ib(),s.lc(49,' are duplicated in a "Feature Module" and a "Root Module" which means Nest will try to instantiate the provider twice. More than likely, the module containing the '),s.Jb(50,"code"),s.lc(51,"provider"),s.Ib(),s.lc(52,' being duplicated should be added in the "Root Module"\'s '),s.Jb(53,"code"),s.lc(54,"imports"),s.Ib(),s.lc(55," array instead."),s.Ib(),s.Jb(56,"h4",9),s.Jb(57,"span"),s.lc(58,'"Circular dependency" error'),s.Ib(),s.Ib(),s.Jb(59,"p"),s.lc(60,"Occasionally you'll find it difficult to avoid "),s.Jb(61,"a",10),s.lc(62,"circular dependencies"),s.Ib(),s.lc(63," in your application. You'll need to take some steps to help Nest resolve these. Errors that arise from circular dependencies look like this:"),s.Ib(),s.Jb(64,"pre"),s.Jb(65,"code",7),s.lc(66,'\nNest cannot create the <module> instance.\nThe module at index [<index>] of the <module> "imports" array is undefined.\n\nPotential causes:\n- A circular dependency between modules. Use forwardRef() to avoid it. Read more: https://docs.nestjs.com/fundamentals/circular-dependency\n- The module at index [<index>] is of type "undefined". Check your import statements and the type of the module.\n\nScope [<module_import_chain>]\n# example chain AppModule -> FooModule\n'),s.Ib(),s.Ib(),s.Jb(67,"p"),s.lc(68,"Circular dependencies can arise from both providers depending on each other, or typescript files depending on each other for constants, such as exporting constants from a module file and importing them in a service file. In the latter case, it is advised to create a separate file for your constants. In the former case, please follow the guide on circular dependencies and make sure that both the modules "),s.Jb(69,"strong"),s.lc(70,"and"),s.Ib(),s.lc(71," the providers are marked with "),s.Jb(72,"code"),s.lc(73,"forwardRef"),s.Ib(),s.lc(74,"."),s.Ib(),s.Ib())},directives:[i.a,n.f],encapsulation:2,changeDetection:0}),e})();const p=s.Lb(l);let b=(()=>{class e extends c.a{}return e.\u0275fac=function(t){return d(t||e)},e.\u0275cmp=s.Ab({type:e,selectors:[["app-global-prefix"]],features:[s.ub],decls:21,vars:0,consts:[[1,"content"],["contentReference",""],[1,"github-links"],["href","https://github.com/nestjs/docs.nestjs.com/edit/master/content/faq/global-prefix.md","aria-label","Suggest Edits","title","Suggest Edits"],[1,"fas","fa-edit"],["id","global-prefix"],[1,"language-typescript"]],template:function(e,t){1&e&&(s.Jb(0,"div",0,1),s.Jb(2,"div",2),s.Jb(3,"a",3),s.Hb(4,"i",4),s.Ib(),s.Ib(),s.Jb(5,"h3",5),s.lc(6,"Global prefix"),s.Ib(),s.Jb(7,"p"),s.lc(8,"To set a prefix for "),s.Jb(9,"strong"),s.lc(10,"every route"),s.Ib(),s.lc(11," registered in an HTTP application, use the "),s.Jb(12,"code"),s.lc(13,"setGlobalPrefix()"),s.Ib(),s.lc(14," method of the "),s.Jb(15,"code"),s.lc(16,"INestApplication"),s.Ib(),s.lc(17," instance."),s.Ib(),s.Jb(18,"pre"),s.Jb(19,"code",6),s.lc(20,"\nconst app = await NestFactory.create(AppModule);\napp.setGlobalPrefix('v1');\n"),s.Ib(),s.Ib(),s.Ib())},encapsulation:2,changeDetection:0}),e})();const d=s.Lb(b);var u=o("FKbk");let h=(()=>{class e extends c.a{}return e.\u0275fac=function(t){return f(t||e)},e.\u0275cmp=s.Ab({type:e,selectors:[["app-http-adapter"]],features:[s.ub],decls:100,vars:4,consts:[[1,"content"],["contentReference",""],[1,"github-links"],["href","https://github.com/nestjs/docs.nestjs.com/edit/master/content/faq/http-adapter.md","aria-label","Suggest Edits","title","Suggest Edits"],[1,"fas","fa-edit"],["id","http-adapter"],["appAnchor","","id","outside-application-context-strategy"],[1,"filename"],["app4608c359aece4dca123dc810071d304cb5300638",""],[1,"language-typescript"],["appAnchor","","id","in-context-strategy"],["app81eec58ab156c4e42200b94be82870b7e83b11cb",""],[1,"info"]],template:function(e,t){if(1&e&&(s.Jb(0,"div",0,1),s.Jb(2,"div",2),s.Jb(3,"a",3),s.Hb(4,"i",4),s.Ib(),s.Ib(),s.Jb(5,"h3",5),s.lc(6,"HTTP adapter"),s.Ib(),s.Jb(7,"p"),s.lc(8,"Occasionally, you may want to access the underlying HTTP server, either within the Nest application context or from the outside."),s.Ib(),s.Jb(9,"p"),s.lc(10,"Every native (platform-specific) HTTP server/library (e.g., Express and Fastify) instance is wrapped in an "),s.Jb(11,"strong"),s.lc(12,"adapter"),s.Ib(),s.lc(13,". The adapter is registered as a globally available provider that can be retrieved from the application context, as well as injected into other providers."),s.Ib(),s.Jb(14,"h4",6),s.Jb(15,"span"),s.lc(16,"Outside application context strategy"),s.Ib(),s.Ib(),s.Jb(17,"p"),s.lc(18,"To get a reference to the "),s.Jb(19,"code"),s.lc(20,"HttpAdapter"),s.Ib(),s.lc(21," from outside of the application context, call the "),s.Jb(22,"code"),s.lc(23,"getHttpAdapter()"),s.Ib(),s.lc(24," method."),s.Ib(),s.Jb(25,"span",7),s.Hb(26,"app-tabs",null,8),s.Ib(),s.Jb(28,"pre"),s.Jb(29,"code",9),s.lc(30,"\nconst app = await NestFactory.create(AppModule);\nconst httpAdapter = app.getHttpAdapter();\n"),s.Ib(),s.Ib(),s.Jb(31,"h4",10),s.Jb(32,"span"),s.lc(33,"In-context strategy"),s.Ib(),s.Ib(),s.Jb(34,"p"),s.lc(35,"To get a reference to the "),s.Jb(36,"code"),s.lc(37,"HttpAdapterHost"),s.Ib(),s.lc(38," from within the application context, inject it using the same technique as any other existing provider (e.g., using constructor injection)."),s.Ib(),s.Jb(39,"span",7),s.Hb(40,"app-tabs",null,11),s.Ib(),s.Jb(42,"pre"),s.Jb(43,"code",9),s.lc(44,"\nexport class CatsService {\n  constructor(private adapterHost: HttpAdapterHost) {}\n}\n"),s.Ib(),s.Ib(),s.Jb(45,"pre"),s.Jb(46,"code",9),s.lc(47,"\n@Dependencies(HttpAdapterHost)\nexport class CatsService {\n  constructor(adapterHost) {\n    this.adapterHost = adapterHost;\n  }\n}\n"),s.Ib(),s.Ib(),s.Jb(48,"blockquote",12),s.Jb(49,"strong"),s.lc(50,"Hint"),s.Ib(),s.lc(51," The "),s.Jb(52,"code"),s.lc(53,"HttpAdapterHost"),s.Ib(),s.lc(54," is imported from the "),s.Jb(55,"code"),s.lc(56,"@nestjs/core"),s.Ib(),s.lc(57," package.\n"),s.Ib(),s.Jb(58,"p"),s.lc(59,"The "),s.Jb(60,"code"),s.lc(61,"HttpAdapterHost"),s.Ib(),s.lc(62," is "),s.Jb(63,"strong"),s.lc(64,"not"),s.Ib(),s.lc(65," an actual "),s.Jb(66,"code"),s.lc(67,"HttpAdapter"),s.Ib(),s.lc(68,". To get the actual "),s.Jb(69,"code"),s.lc(70,"HttpAdapter"),s.Ib(),s.lc(71," instance, simply access the "),s.Jb(72,"code"),s.lc(73,"httpAdapter"),s.Ib(),s.lc(74," property."),s.Ib(),s.Jb(75,"pre"),s.Jb(76,"code",9),s.lc(77,"\nconst adapterHost = app.get(HttpAdapterHost);\nconst httpAdapter = adapterHost.httpAdapter;\n"),s.Ib(),s.Ib(),s.Jb(78,"p"),s.lc(79,"The "),s.Jb(80,"code"),s.lc(81,"httpAdapter"),s.Ib(),s.lc(82," is the actual instance of the HTTP adapter used by the underlying framework. It is an instance of either "),s.Jb(83,"code"),s.lc(84,"ExpressAdapter"),s.Ib(),s.lc(85," or "),s.Jb(86,"code"),s.lc(87,"FastifyAdapter"),s.Ib(),s.lc(88," (both classes extend "),s.Jb(89,"code"),s.lc(90,"AbstractHttpAdapter"),s.Ib(),s.lc(91,")."),s.Ib(),s.Jb(92,"p"),s.lc(93,"The adapter object exposes several useful methods to interact with the HTTP server. However, if you want to access the library instance (e.g., the Express instance) directly, call the "),s.Jb(94,"code"),s.lc(95,"getInstance()"),s.Ib(),s.lc(96," method."),s.Ib(),s.Jb(97,"pre"),s.Jb(98,"code",9),s.lc(99,"\nconst instance = httpAdapter.getInstance();\n"),s.Ib(),s.Ib(),s.Ib()),2&e){const e=s.ec(41);s.wb(42),s.yb("hide",e.isJsActive),s.wb(3),s.yb("hide",!e.isJsActive)}},directives:[i.a,u.a],encapsulation:2,changeDetection:0}),e})();const f=s.Lb(h);let m=(()=>{class e extends c.a{}return e.\u0275fac=function(t){return I(t||e)},e.\u0275cmp=s.Ab({type:e,selectors:[["app-hybrid-application"]],features:[s.ub],decls:78,vars:4,consts:[[1,"content"],["contentReference",""],[1,"github-links"],["href","https://github.com/nestjs/docs.nestjs.com/edit/master/content/faq/hybrid-application.md","aria-label","Suggest Edits","title","Suggest Edits"],[1,"fas","fa-edit"],["id","hybrid-application"],[1,"language-typescript"],[1,"filename"],["app461bd1ef007c6068d9e1a98910796efc69b84766",""],[1,"info"],["appAnchor","","id","sharing-configuration"]],template:function(e,t){if(1&e&&(s.Jb(0,"div",0,1),s.Jb(2,"div",2),s.Jb(3,"a",3),s.Hb(4,"i",4),s.Ib(),s.Ib(),s.Jb(5,"h3",5),s.lc(6,"Hybrid application"),s.Ib(),s.Jb(7,"p"),s.lc(8,"A hybrid application is one that both listens for HTTP requests, as well as makes use of connected microservices. The "),s.Jb(9,"code"),s.lc(10,"INestApplication"),s.Ib(),s.lc(11," instance can be connected with "),s.Jb(12,"code"),s.lc(13,"INestMicroservice"),s.Ib(),s.lc(14," instances through the "),s.Jb(15,"code"),s.lc(16,"connectMicroservice()"),s.Ib(),s.lc(17," method."),s.Ib(),s.Jb(18,"pre"),s.Jb(19,"code",6),s.lc(20,"\nconst app = await NestFactory.create(AppModule);\nconst microservice = app.connectMicroservice({\n  transport: Transport.TCP,\n});\n\nawait app.startAllMicroservicesAsync();\nawait app.listen(3001);\n"),s.Ib(),s.Ib(),s.Jb(21,"p"),s.lc(22,"To connect multiple microservice instances, issue the call to "),s.Jb(23,"code"),s.lc(24,"connectMicroservice()"),s.Ib(),s.lc(25," for each microservice:"),s.Ib(),s.Jb(26,"pre"),s.Jb(27,"code",6),s.lc(28,"\nconst app = await NestFactory.create(AppModule);\n// microservice #1\nconst microserviceTcp = app.connectMicroservice<MicroserviceOptions>({\n  transport: Transport.TCP,\n  options: {\n    port: 3001,\n  },\n});\n// microservice #2\nconst microserviceRedis = app.connectMicroservice<MicroserviceOptions>({\n  transport: Transport.REDIS,\n  options: {\n    url: 'redis://localhost:6379',\n  },\n});\n\nawait app.startAllMicroservicesAsync();\nawait app.listen(3001);\n"),s.Ib(),s.Ib(),s.Jb(29,"p"),s.lc(30,"To bind "),s.Jb(31,"code"),s.lc(32,"@MessagePattern()"),s.Ib(),s.lc(33," to only one transport strategy (for example, MQTT) in a hybrid application with multiple microservices, we can pass the second argument of type "),s.Jb(34,"code"),s.lc(35,"Transport"),s.Ib(),s.lc(36," which is an enum with all the built-in transport strategies defined."),s.Ib(),s.Jb(37,"span",7),s.Hb(38,"app-tabs",null,8),s.Ib(),s.Jb(40,"pre"),s.Jb(41,"code",6),s.lc(42,"\n@MessagePattern('time.us.*', Transport.NATS)\ngetDate(@Payload() data: number[], @Ctx() context: NatsContext) {\n  console.log(`Subject: ${context.getSubject()}`); // e.g. \"time.us.east\"\n  return new Date().toLocaleTimeString(...);\n}\n@MessagePattern({ cmd: 'time.us' }, Transport.TCP)\ngetTCPDate(@Payload() data: number[]) {\n  return new Date().toLocaleTimeString(...);\n}\n"),s.Ib(),s.Ib(),s.Jb(43,"pre"),s.Jb(44,"code",6),s.lc(45,"\n@Bind(Payload(), Ctx())\n@MessagePattern('time.us.*', Transport.NATS)\ngetDate(data, context) {\n  console.log(`Subject: ${context.getSubject()}`); // e.g. \"time.us.east\"\n  return new Date().toLocaleTimeString(...);\n}\n@Bind(Payload(), Ctx())\n@MessagePattern({ cmd: 'time.us' }, Transport.TCP)\ngetTCPDate(data, context) {\n  return new Date().toLocaleTimeString(...);\n}\n"),s.Ib(),s.Ib(),s.Jb(46,"blockquote",9),s.Jb(47,"strong"),s.lc(48,"Hint"),s.Ib(),s.Jb(49,"code"),s.lc(50,"@Payload()"),s.Ib(),s.lc(51,", "),s.Jb(52,"code"),s.lc(53,"@Ctx()"),s.Ib(),s.lc(54,", "),s.Jb(55,"code"),s.lc(56,"Transport"),s.Ib(),s.lc(57," and "),s.Jb(58,"code"),s.lc(59,"NatsContext"),s.Ib(),s.lc(60," are imported from "),s.Jb(61,"code"),s.lc(62,"@nestjs/microservices"),s.Ib(),s.lc(63,".\n"),s.Ib(),s.Jb(64,"h4",10),s.Jb(65,"span"),s.lc(66,"Sharing configuration"),s.Ib(),s.Ib(),s.Jb(67,"p"),s.lc(68,"By default a hybrid application will not inherit global pipes, interceptors, guards and filters configured for the main (HTTP-based) application.\nTo inherit these configuration properties from the main application, set the "),s.Jb(69,"code"),s.lc(70,"inheritAppConfig"),s.Ib(),s.lc(71," property in the second argument (an optional options object) of the "),s.Jb(72,"code"),s.lc(73,"connectMicroservice()"),s.Ib(),s.lc(74," call, as follow:"),s.Ib(),s.Jb(75,"pre"),s.Jb(76,"code",6),s.lc(77,"\nconst microservice = app.connectMicroservice({\n  transport: Transport.TCP\n}, { inheritAppConfig: true });\n"),s.Ib(),s.Ib(),s.Ib()),2&e){const e=s.ec(39);s.wb(40),s.yb("hide",e.isJsActive),s.wb(3),s.yb("hide",!e.isJsActive)}},directives:[u.a,i.a],encapsulation:2,changeDetection:0}),e})();const I=s.Lb(m);let J=(()=>{class e extends c.a{}return e.\u0275fac=function(t){return g(t||e)},e.\u0275cmp=s.Ab({type:e,selectors:[["app-multiple-servers"]],features:[s.ub],decls:60,vars:0,consts:[[1,"content"],["contentReference",""],[1,"github-links"],["href","https://github.com/nestjs/docs.nestjs.com/edit/master/content/faq/multiple-servers.md","aria-label","Suggest Edits","title","Suggest Edits"],[1,"fas","fa-edit"],["id","https"],[1,"language-typescript"],["appAnchor","","id","multiple-simultaneous-servers"],[1,"info"],[1,""],["routerLink","/graphql/subscriptions"]],template:function(e,t){1&e&&(s.Jb(0,"div",0,1),s.Jb(2,"div",2),s.Jb(3,"a",3),s.Hb(4,"i",4),s.Ib(),s.Ib(),s.Jb(5,"h3",5),s.lc(6,"HTTPS"),s.Ib(),s.Jb(7,"p"),s.lc(8,"To create an application that uses the HTTPS protocol, set the "),s.Jb(9,"code"),s.lc(10,"httpsOptions"),s.Ib(),s.lc(11," property in the options object passed to the "),s.Jb(12,"code"),s.lc(13,"create()"),s.Ib(),s.lc(14," method of the "),s.Jb(15,"code"),s.lc(16,"NestFactory"),s.Ib(),s.lc(17," class:"),s.Ib(),s.Jb(18,"pre"),s.Jb(19,"code",6),s.lc(20,"\nconst httpsOptions = {\n  key: fs.readFileSync('./secrets/private-key.pem'),\n  cert: fs.readFileSync('./secrets/public-certificate.pem'),\n};\nconst app = await NestFactory.create(AppModule, {\n  httpsOptions,\n});\nawait app.listen(3000);\n"),s.Ib(),s.Ib(),s.Jb(21,"p"),s.lc(22,"If you use the "),s.Jb(23,"code"),s.lc(24,"FastifyAdapter"),s.Ib(),s.lc(25,", create the application as follows:"),s.Ib(),s.Jb(26,"pre"),s.Jb(27,"code",6),s.lc(28,"\nconst app = await NestFactory.create<NestFastifyApplication>(\n  AppModule,\n  new FastifyAdapter({ https: httpsOptions }),\n);\n"),s.Ib(),s.Ib(),s.Jb(29,"h4",7),s.Jb(30,"span"),s.lc(31,"Multiple simultaneous servers"),s.Ib(),s.Ib(),s.Jb(32,"p"),s.lc(33,"The following recipe shows how to instantiate a Nest application that listens on multiple ports (for example, on a non-HTTPS port and an HTTPS port) simultaneously."),s.Ib(),s.Jb(34,"pre"),s.Jb(35,"code",6),s.lc(36,"\nconst httpsOptions = {\n  key: fs.readFileSync('./secrets/private-key.pem'),\n  cert: fs.readFileSync('./secrets/public-certificate.pem'),\n};\n\nconst server = express();\nconst app = await NestFactory.create(\n  AppModule,\n  new ExpressAdapter(server),\n);\nawait app.init();\n\nhttp.createServer(server).listen(3000);\nhttps.createServer(httpsOptions, server).listen(443);\n"),s.Ib(),s.Ib(),s.Jb(37,"blockquote",8),s.Jb(38,"strong"),s.lc(39,"Hint"),s.Ib(),s.lc(40," The "),s.Jb(41,"code"),s.lc(42,"ExpressAdapter"),s.Ib(),s.lc(43," is imported from the "),s.Jb(44,"code"),s.lc(45,"@nestjs/platform-express"),s.Ib(),s.lc(46," package. The "),s.Jb(47,"code"),s.lc(48,"http"),s.Ib(),s.lc(49," and "),s.Jb(50,"code"),s.lc(51,"https"),s.Ib(),s.lc(52," packages are native Node.js packages.\n"),s.Ib(),s.Jb(53,"blockquote",9),s.Jb(54,"strong"),s.lc(55,"Warning"),s.Ib(),s.lc(56," This recipe does not work with "),s.Jb(57,"a",10),s.lc(58,"GraphQL Subscriptions"),s.Ib(),s.lc(59,".\n"),s.Ib(),s.Ib())},directives:[i.a,n.f],encapsulation:2,changeDetection:0}),e})();const g=s.Lb(J);let y=(()=>{class e extends c.a{}return e.\u0275fac=function(t){return v(t||e)},e.\u0275cmp=s.Ab({type:e,selectors:[["app-request-lifecycle"]],features:[s.ub],decls:145,vars:0,consts:[[1,"content"],["contentReference",""],[1,"github-links"],["href","https://github.com/nestjs/docs.nestjs.com/edit/master/content/faq/request-lifecycle.md","aria-label","Suggest Edits","title","Suggest Edits"],[1,"fas","fa-edit"],["id","request-lifecycle"],["appAnchor","","id","middleware"],["routerLink","/middleware"],["appAnchor","","id","guards"],[1,"language-typescript"],[1,"info"],["appAnchor","","id","interceptors"],["rel","nofollow","target","_blank","href","https://github.com/ReactiveX/rxjs"],["appAnchor","","id","pipes"],["appAnchor","","id","filters"],["appAnchor","","id","summary"]],template:function(e,t){1&e&&(s.Jb(0,"div",0,1),s.Jb(2,"div",2),s.Jb(3,"a",3),s.Hb(4,"i",4),s.Ib(),s.Ib(),s.Jb(5,"h3",5),s.lc(6,"Request lifecycle"),s.Ib(),s.Jb(7,"p"),s.lc(8,"Nest applications handle requests and produce responses in a sequence we refer to as the "),s.Jb(9,"strong"),s.lc(10,"request lifecycle"),s.Ib(),s.lc(11,". With the use of middleware, pipes, guards, and interceptors, it can be challenging to track down where a particular piece of code executes during the request lifecycle, especially as global, controller level, and route level components come into play. In general, a request flows through middleware to guards, then to interceptors, then to pipes and finally back to interceptors on the return path (as the response is generated)."),s.Ib(),s.Jb(12,"h4",6),s.Jb(13,"span"),s.lc(14,"Middleware"),s.Ib(),s.Ib(),s.Jb(15,"p"),s.lc(16,"Middleware is executed in a particular sequence. First, Nest runs globally bound middleware (such as middleware bound with "),s.Jb(17,"code"),s.lc(18,"app.use"),s.Ib(),s.lc(19,") and then it runs "),s.Jb(20,"a",7),s.lc(21,"module bound middleware"),s.Ib(),s.lc(22,", which are determined on paths. Middleware are run sequentially in the order they are bound, similar to the way middleware in Express works. In the case of middleware bound across different modules, the middleware bound to the root module will run first, and then middleware will run in the order that the modules are added to the imports array."),s.Ib(),s.Jb(23,"h4",8),s.Jb(24,"span"),s.lc(25,"Guards"),s.Ib(),s.Ib(),s.Jb(26,"p"),s.lc(27,"Guard execution starts with global guards, then proceeds to controller guards, and finally to route guards. As with middleware, guards run in the order in which they are bound. For example:"),s.Ib(),s.Jb(28,"pre"),s.Jb(29,"code",9),s.lc(30,"\n@UseGuards(Guard1, Guard2)\n@Controller('cats')\nexport class CatsController {\n  constructor(private catsService: CatsService) {}\n\n  @UseGuards(Guard3)\n  @Get()\n  getCats(): Cats[] {\n    return this.catsService.getCats();\n  }\n}\n"),s.Ib(),s.Ib(),s.Jb(31,"p"),s.Jb(32,"code"),s.lc(33,"Guard1"),s.Ib(),s.lc(34," will execute before "),s.Jb(35,"code"),s.lc(36,"Guard2"),s.Ib(),s.lc(37," and both will execute before "),s.Jb(38,"code"),s.lc(39,"Guard3"),s.Ib(),s.lc(40,"."),s.Ib(),s.Jb(41,"blockquote",10),s.Jb(42,"strong"),s.lc(43,"Hint"),s.Ib(),s.lc(44," When speaking about globally bound vs controller or locally bound, the difference is where the guard (or other component is bound). If you are using "),s.Jb(45,"code"),s.lc(46,"app.useGlobalGuard()"),s.Ib(),s.lc(47," or providing the component via a module, it is globally bound. Otherwise, it is bound to a controller if the decorator precedes a controller class, or to a route if the decorator proceeds a route declaration.\n"),s.Ib(),s.Jb(48,"h4",11),s.Jb(49,"span"),s.lc(50,"Interceptors"),s.Ib(),s.Ib(),s.Jb(51,"p"),s.lc(52,"Interceptors, for the most part, follow the same pattern as guards, with one catch: as interceptors return "),s.Jb(53,"a",12),s.lc(54,"RxJS Observables"),s.Ib(),s.lc(55,", the observables will be resolved in a first in last out manner. So inbound requests will go through the standard global, controller, route level resolution, but the response side of the request (i.e., after returning from the controller method handler) will be resolved from route to controller to global. Also, any errors thrown by pipes, controllers, or services can be read in the "),s.Jb(56,"code"),s.lc(57,"catchError"),s.Ib(),s.lc(58," operator of an interceptor."),s.Ib(),s.Jb(59,"h4",13),s.Jb(60,"span"),s.lc(61,"Pipes"),s.Ib(),s.Ib(),s.Jb(62,"p"),s.lc(63,"Pipes follow the standard global to controller to route bound sequence, with the same first in first out in regards to the "),s.Jb(64,"code"),s.lc(65,"@usePipes()"),s.Ib(),s.lc(66," parameters. However, at a route parameter level, if you have multiple pipes running, they will run in the order of the last parameter with a pipe to the first. This also applies to the route level and controller level pipes. For example, if we have the following controller:"),s.Ib(),s.Jb(67,"pre"),s.Jb(68,"code",9),s.lc(69,"\n@UsePipes(GeneralValidationPipe)\n@Controller('cats')\nexport class CatsController {\n  constructor(private catsService: CatsService) {}\n\n  @UsePipes(RouteSpecificPipe)\n  @Patch(':id')\n  updateCat(\n    @Body() body: UpdateCatDTO,\n    @Param() params: UpdateCatParams,\n    @Query() query: UpdateCatQuery,\n  ) {\n    return this.catsService.updateCat(body, params, query);\n  }\n}\n"),s.Ib(),s.Ib(),s.Jb(70,"p"),s.lc(71,"then the "),s.Jb(72,"code"),s.lc(73,"GeneralValidationPipe"),s.Ib(),s.lc(74," will run for the "),s.Jb(75,"code"),s.lc(76,"query"),s.Ib(),s.lc(77,", then the "),s.Jb(78,"code"),s.lc(79,"params"),s.Ib(),s.lc(80,", and then the "),s.Jb(81,"code"),s.lc(82,"body"),s.Ib(),s.lc(83," objects before moving on to the "),s.Jb(84,"code"),s.lc(85,"RouteSpecificPipe"),s.Ib(),s.lc(86,", which follows the same order. If any parameter-specific pipes were in place, they would run (again, from the last to first parameter) after the controller and route level pipes."),s.Ib(),s.Jb(87,"h4",14),s.Jb(88,"span"),s.lc(89,"Filters"),s.Ib(),s.Ib(),s.Jb(90,"p"),s.lc(91,"Filters are the only component that do not resolve global first. Instead, filters resolve from the lowest level possible, meaning execution starts with any route bound filters and proceeding next to controller level, and finally to global filters. Note that exceptions cannot be passed from filter to filter; if a route level filter catches the exception, a controller or global level filter cannot catch the same exception. The only way to achieve an effect like this is to use inheritance between the filters."),s.Ib(),s.Jb(92,"blockquote",10),s.Jb(93,"strong"),s.lc(94,"Hint"),s.Ib(),s.lc(95," Filters are only executed if any uncaught exception occurs during the request process. Caught exceptions, such as those caught with a "),s.Jb(96,"code"),s.lc(97,"try/catch"),s.Ib(),s.lc(98," will not trigger Exception Filters to fire. As soon as an uncaught exception is encountered, the rest of the lifecycle is ignored and the request skips straight to the filter.\n"),s.Ib(),s.Jb(99,"h4",15),s.Jb(100,"span"),s.lc(101,"Summary"),s.Ib(),s.Ib(),s.Jb(102,"p"),s.lc(103,"In general, the request lifecycle looks like the following:"),s.Ib(),s.Jb(104,"ol"),s.Jb(105,"li"),s.lc(106,"Incoming request"),s.Ib(),s.Jb(107,"li"),s.lc(108,"Globally bound middleware"),s.Ib(),s.Jb(109,"li"),s.lc(110,"Module bound middleware"),s.Ib(),s.Jb(111,"li"),s.lc(112,"Global guards"),s.Ib(),s.Jb(113,"li"),s.lc(114,"Controller guards"),s.Ib(),s.Jb(115,"li"),s.lc(116,"Route guards"),s.Ib(),s.Jb(117,"li"),s.lc(118,"Global interceptors (pre-controller)"),s.Ib(),s.Jb(119,"li"),s.lc(120,"Controller interceptors (pre-controller)"),s.Ib(),s.Jb(121,"li"),s.lc(122,"Route interceptors (pre-controller)"),s.Ib(),s.Jb(123,"li"),s.lc(124,"Global pipes"),s.Ib(),s.Jb(125,"li"),s.lc(126,"Controller pipes"),s.Ib(),s.Jb(127,"li"),s.lc(128,"Route pipes"),s.Ib(),s.Jb(129,"li"),s.lc(130,"Route parameter pipes"),s.Ib(),s.Jb(131,"li"),s.lc(132,"Controller (method handler)"),s.Ib(),s.Jb(133,"li"),s.lc(134,"Service (if exists)"),s.Ib(),s.Jb(135,"li"),s.lc(136,"Route interceptor (post-request)"),s.Ib(),s.Jb(137,"li"),s.lc(138,"Controller interceptor (post-request)"),s.Ib(),s.Jb(139,"li"),s.lc(140,"Global interceptor (post-request)"),s.Ib(),s.Jb(141,"li"),s.lc(142,"Exception filters (route, then controller, then global)"),s.Ib(),s.Jb(143,"li"),s.lc(144,"Server response"),s.Ib(),s.Ib(),s.Ib())},directives:[i.a,n.f],encapsulation:2,changeDetection:0}),e})();const v=s.Lb(y),w=[{path:"global-prefix",component:b,data:{title:"Global prefix - FAQ"}},{path:"hybrid-application",component:m,data:{title:"Hybrid application - FAQ"}},{path:"multiple-servers",component:J,data:{title:"HTTPS & Multiple Servers - FAQ"}},{path:"http-adapter",component:h,data:{title:"HTTP adapter - FAQ"}},{path:"request-lifecycle",component:y,data:{title:"Request lifecycle - FAQ"}},{path:"common-errors",component:l,data:{title:"Common errors - FAQ"}}];let x=(()=>{class e{}return e.\u0275mod=s.Eb({type:e}),e.\u0275inj=s.Db({factory:function(t){return new(t||e)},imports:[[r.b,a.a,n.g.forChild(w)]]}),e})()}}]);