"use strict";(self.webpackChunkdocs_nestjs_com=self.webpackChunkdocs_nestjs_com||[]).push([[338],{7338:(v,T,r)=>{r.r(T),r.d(T,{OpenApiModule:()=>_});var a=r(1180),m=r(6895),h=r(6641),q=r(4466),s=r(4834),e=r(1571),i=r(4521);class u extends s.y{}(0,a.Z)(u,"\u0275fac",function(){let t;return function(n){return(t||(t=e.n5z(u)))(n||u)}}()),(0,a.Z)(u,"\u0275cmp",e.Xpm({type:u,selectors:[["app-cli-plugin"]],features:[e.qOj],decls:399,vars:0,consts:[[1,"content"],["contentReference",""],[1,"github-links"],["href","https://github.com/nestjs/docs.nestjs.com/edit/master/content/openapi/cli-plugin.md","aria-label","Suggest Edits","title","Suggest Edits"],[1,"fas","fa-edit"],["id","cli-plugin"],[1,"info"],["appAnchor","","id","overview"],[1,"language-typescript"],["href","/openapi/cli-plugin#using-the-cli-plugin"],["rel","nofollow","target","_blank","href","https://docs.nestjs.com/openapi/mapped-types"],["appAnchor","","id","comments-introspection"],[1,"language-ts"],["appAnchor","","id","using-the-cli-plugin"],["routerLink","/cli/overview"],[1,"language-javascript"],["appAnchor","","id","integration-with-ts-jest-e2e-tests"],[1,"language-json"],["appAnchor","","id","troubleshooting-jest-e2e-tests"],[1,"language-bash"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0,1)(2,"div",2)(3,"a",3),e._UZ(4,"i",4),e.qZA()(),e.TgZ(5,"h3",5),e._uU(6,"CLI Plugin"),e.qZA(),e.TgZ(7,"p"),e._uU(8,"TypeScript's metadata reflection system has several limitations which make it impossible to, for instance, determine what properties a class consists of or recognize whether a given property is optional or required. However, some of these constraints can be addressed at compilation time. Nest provides a plugin that enhances the TypeScript compilation process to reduce the amount of boilerplate code required."),e.qZA(),e.TgZ(9,"blockquote",6)(10,"strong"),e._uU(11,"Hint"),e.qZA(),e._uU(12," This plugin is "),e.TgZ(13,"strong"),e._uU(14,"opt-in"),e.qZA(),e._uU(15,". If you prefer, you can declare all decorators manually, or only specific decorators where you need them.\n"),e.qZA(),e.TgZ(16,"h4",7)(17,"span"),e._uU(18,"Overview"),e.qZA()(),e.TgZ(19,"p"),e._uU(20,"The Swagger plugin will automatically:"),e.qZA(),e.TgZ(21,"ul")(22,"li"),e._uU(23,"annotate all DTO properties with "),e.TgZ(24,"code"),e._uU(25,"@ApiProperty"),e.qZA(),e._uU(26," unless "),e.TgZ(27,"code"),e._uU(28,"@ApiHideProperty"),e.qZA(),e._uU(29," is used"),e.qZA(),e.TgZ(30,"li"),e._uU(31,"set the "),e.TgZ(32,"code"),e._uU(33,"required"),e.qZA(),e._uU(34," property depending on the question mark (e.g. "),e.TgZ(35,"code"),e._uU(36,"name?: string"),e.qZA(),e._uU(37," will set "),e.TgZ(38,"code"),e._uU(39,"required: false"),e.qZA(),e._uU(40,")"),e.qZA(),e.TgZ(41,"li"),e._uU(42,"set the "),e.TgZ(43,"code"),e._uU(44,"type"),e.qZA(),e._uU(45," or "),e.TgZ(46,"code"),e._uU(47,"enum"),e.qZA(),e._uU(48," property depending on the type (supports arrays as well)"),e.qZA(),e.TgZ(49,"li"),e._uU(50,"set the "),e.TgZ(51,"code"),e._uU(52,"default"),e.qZA(),e._uU(53," property based on the assigned default value"),e.qZA(),e.TgZ(54,"li"),e._uU(55,"set several validation rules based on "),e.TgZ(56,"code"),e._uU(57,"class-validator"),e.qZA(),e._uU(58," decorators (if "),e.TgZ(59,"code"),e._uU(60,"classValidatorShim"),e.qZA(),e._uU(61," set to "),e.TgZ(62,"code"),e._uU(63,"true"),e.qZA(),e._uU(64,")"),e.qZA(),e.TgZ(65,"li"),e._uU(66,"add a response decorator to every endpoint with a proper status and "),e.TgZ(67,"code"),e._uU(68,"type"),e.qZA(),e._uU(69," (response model)"),e.qZA(),e.TgZ(70,"li"),e._uU(71,"generate descriptions for properties and endpoints based on comments (if "),e.TgZ(72,"code"),e._uU(73,"introspectComments"),e.qZA(),e._uU(74," set to "),e.TgZ(75,"code"),e._uU(76,"true"),e.qZA(),e._uU(77,")"),e.qZA(),e.TgZ(78,"li"),e._uU(79,"generate example values for properties based on comments (if "),e.TgZ(80,"code"),e._uU(81,"introspectComments"),e.qZA(),e._uU(82," set to "),e.TgZ(83,"code"),e._uU(84,"true"),e.qZA(),e._uU(85,")"),e.qZA()(),e.TgZ(86,"p"),e._uU(87,"Please, note that your filenames "),e.TgZ(88,"strong"),e._uU(89,"must have"),e.qZA(),e._uU(90," one of the following suffixes: "),e.TgZ(91,"code"),e._uU(92,"['.dto.ts', '.entity.ts']"),e.qZA(),e._uU(93," (e.g., "),e.TgZ(94,"code"),e._uU(95,"create-user.dto.ts"),e.qZA(),e._uU(96,") in order to be analysed by the plugin."),e.qZA(),e.TgZ(97,"p"),e._uU(98,"If you are using a different suffix, you can adjust the plugin's behavior by specifying the "),e.TgZ(99,"code"),e._uU(100,"dtoFileNameSuffix"),e.qZA(),e._uU(101," option (see below)."),e.qZA(),e.TgZ(102,"p"),e._uU(103,"Previously, if you wanted to provide an interactive experience with the Swagger UI,\nyou had to duplicate a lot of code to let the package know how your models/components should be declared in the specification. For example, you could define a simple "),e.TgZ(104,"code"),e._uU(105,"CreateUserDto"),e.qZA(),e._uU(106," class as follows:"),e.qZA(),e.TgZ(107,"pre")(108,"code",8),e._uU(109,"\nexport class CreateUserDto {\n  @ApiProperty()\n  email: string;\n\n  @ApiProperty()\n  password: string;\n\n  @ApiProperty({ enum: RoleEnum, default: [], isArray: true })\n  roles: RoleEnum[] = [];\n\n  @ApiProperty({ required: false, default: true })\n  isEnabled?: boolean = true;\n}\n"),e.qZA()(),e.TgZ(110,"p"),e._uU(111,"While not a significant issue with medium-sized projects, it becomes verbose & hard to maintain once you have a large set of classes."),e.qZA(),e.TgZ(112,"p"),e._uU(113,"By "),e.TgZ(114,"a",9),e._uU(115,"enabling the Swagger plugin"),e.qZA(),e._uU(116,", the above class definition can be declared simply:"),e.qZA(),e.TgZ(117,"pre")(118,"code",8),e._uU(119,"\nexport class CreateUserDto {\n  email: string;\n  password: string;\n  roles: RoleEnum[] = [];\n  isEnabled?: boolean = true;\n}\n"),e.qZA()(),e.TgZ(120,"blockquote",6)(121,"strong"),e._uU(122,"Hint"),e.qZA(),e._uU(123," When using "),e.TgZ(124,"a",10),e._uU(125,"mapped types utilities"),e.qZA(),e._uU(126," (like "),e.TgZ(127,"code"),e._uU(128,"PartialType"),e.qZA(),e._uU(129,") in DTOs import them from "),e.TgZ(130,"code"),e._uU(131,"@nestjs/swagger"),e.qZA(),e._uU(132," instead of "),e.TgZ(133,"code"),e._uU(134,"@nestjs/mapped-types"),e.qZA(),e._uU(135," for the plugin to pick up the schema.\n"),e.qZA(),e.TgZ(136,"p"),e._uU(137,"The plugin adds appropriate decorators on the fly based on the "),e.TgZ(138,"strong"),e._uU(139,"Abstract Syntax Tree"),e.qZA(),e._uU(140,". Thus you won't have to struggle with "),e.TgZ(141,"code"),e._uU(142,"@ApiProperty"),e.qZA(),e._uU(143," decorators scattered throughout the code."),e.qZA(),e.TgZ(144,"blockquote",6)(145,"strong"),e._uU(146,"Hint"),e.qZA(),e._uU(147," The plugin will automatically generate any missing swagger properties, but if you need to override them, you simply set them explicitly via "),e.TgZ(148,"code"),e._uU(149,"@ApiProperty()"),e.qZA(),e._uU(150,".\n"),e.qZA(),e.TgZ(151,"h4",11)(152,"span"),e._uU(153,"Comments introspection"),e.qZA()(),e.TgZ(154,"p"),e._uU(155,"With the comments introspection feature enabled, CLI plugin will generate descriptions and example values for properties based on comments."),e.qZA(),e.TgZ(156,"p"),e._uU(157,"For example, given an example "),e.TgZ(158,"code"),e._uU(159,"roles"),e.qZA(),e._uU(160," property:"),e.qZA(),e.TgZ(161,"pre")(162,"code",8),e._uU(163,"\n/**\n * A list of user's roles\n * @example ['admin']\n */\n@ApiProperty({\n  description: `A list of user's roles`,\n  example: ['admin'],\n})\nroles: RoleEnum[] = [];\n"),e.qZA()(),e.TgZ(164,"p"),e._uU(165,"You must duplicate both description and example values. With "),e.TgZ(166,"code"),e._uU(167,"introspectComments"),e.qZA(),e._uU(168," enabled, the CLI plugin can extract these comments and automatically provide descriptions (and examples, if defined) for properties. Now, the above property can be declared simply as follows:"),e.qZA(),e.TgZ(169,"pre")(170,"code",8),e._uU(171,"\n/**\n * A list of user's roles\n * @example ['admin']\n */\nroles: RoleEnum[] = [];\n"),e.qZA()(),e.TgZ(172,"p"),e._uU(173,"There are "),e.TgZ(174,"code"),e._uU(175,"dtoKeyOfComment"),e.qZA(),e._uU(176," and "),e.TgZ(177,"code"),e._uU(178,"controllerKeyOfComment"),e.qZA(),e._uU(179," plugin options that you can use to customize how the plugin will set the value for "),e.TgZ(180,"code"),e._uU(181,"ApiProperty"),e.qZA(),e._uU(182," and "),e.TgZ(183,"code"),e._uU(184,"ApiOperation"),e.qZA(),e._uU(185," decorators respectively. Take a look at the following example:"),e.qZA(),e.TgZ(186,"pre")(187,"code",8),e._uU(188,"\nexport class SomeController {\n  /**\n   * Create some resource\n   */\n  @Post()\n  create() {}\n}\n"),e.qZA()(),e.TgZ(189,"p"),e._uU(190,"By default, these options are set to "),e.TgZ(191,"code"),e._uU(192,'"description"'),e.qZA(),e._uU(193,". This means the plugin will assign "),e.TgZ(194,"code"),e._uU(195,'"Create some resource"'),e.qZA(),e._uU(196," to "),e.TgZ(197,"code"),e._uU(198,"description"),e.qZA(),e._uU(199," key on the "),e.TgZ(200,"code"),e._uU(201,"ApiOperation"),e.qZA(),e._uU(202," operator. Like so:"),e.qZA(),e.TgZ(203,"pre")(204,"code",12),e._uU(205,'\n@ApiOperation({ description: "Create some resource" })\n'),e.qZA()(),e.TgZ(206,"blockquote",6)(207,"strong"),e._uU(208,"Hint"),e.qZA(),e._uU(209," For models, the same logic applies but to "),e.TgZ(210,"code"),e._uU(211,"ApiProperty"),e.qZA(),e._uU(212," decorator instead.\n"),e.qZA(),e.TgZ(213,"h4",13)(214,"span"),e._uU(215,"Using the CLI plugin"),e.qZA()(),e.TgZ(216,"p"),e._uU(217,"To enable the plugin, open "),e.TgZ(218,"code"),e._uU(219,"nest-cli.json"),e.qZA(),e._uU(220," (if you use "),e.TgZ(221,"a",14),e._uU(222,"Nest CLI"),e.qZA(),e._uU(223,") and add the following "),e.TgZ(224,"code"),e._uU(225,"plugins"),e.qZA(),e._uU(226," configuration:"),e.qZA(),e.TgZ(227,"pre")(228,"code",15),e._uU(229,'\n{\n  "collection": "@nestjs/schematics",\n  "sourceRoot": "src",\n  "compilerOptions": {\n    "plugins": ["@nestjs/swagger"]\n  }\n}\n'),e.qZA()(),e.TgZ(230,"p"),e._uU(231,"You can use the "),e.TgZ(232,"code"),e._uU(233,"options"),e.qZA(),e._uU(234," property to customize the behavior of the plugin."),e.qZA(),e.TgZ(235,"pre")(236,"code",15),e._uU(237,'\n"plugins": [\n  {\n    "name": "@nestjs/swagger",\n    "options": {\n      "classValidatorShim": false,\n      "introspectComments": true\n    }\n  }\n]\n'),e.qZA()(),e.TgZ(238,"p"),e._uU(239,"The "),e.TgZ(240,"code"),e._uU(241,"options"),e.qZA(),e._uU(242," property has to fulfill the following interface:"),e.qZA(),e.TgZ(243,"pre")(244,"code",8),e._uU(245,"\nexport interface PluginOptions {\n  dtoFileNameSuffix?: string[];\n  controllerFileNameSuffix?: string[];\n  classValidatorShim?: boolean;\n  dtoKeyOfComment?: string;\n  controllerKeyOfComment?: string;\n  introspectComments?: boolean;\n}\n"),e.qZA()(),e.TgZ(246,"table")(247,"tr")(248,"th"),e._uU(249,"Option"),e.qZA(),e.TgZ(250,"th"),e._uU(251,"Default"),e.qZA(),e.TgZ(252,"th"),e._uU(253,"Description"),e.qZA()(),e.TgZ(254,"tr")(255,"td")(256,"code"),e._uU(257,"dtoFileNameSuffix"),e.qZA()(),e.TgZ(258,"td")(259,"code"),e._uU(260,"['.dto.ts', '.entity.ts']"),e.qZA()(),e.TgZ(261,"td"),e._uU(262,"DTO (Data Transfer Object) files suffix"),e.qZA()(),e.TgZ(263,"tr")(264,"td")(265,"code"),e._uU(266,"controllerFileNameSuffix"),e.qZA()(),e.TgZ(267,"td")(268,"code"),e._uU(269,".controller.ts"),e.qZA()(),e.TgZ(270,"td"),e._uU(271,"Controller files suffix"),e.qZA()(),e.TgZ(272,"tr")(273,"td")(274,"code"),e._uU(275,"classValidatorShim"),e.qZA()(),e.TgZ(276,"td")(277,"code"),e._uU(278,"true"),e.qZA()(),e.TgZ(279,"td"),e._uU(280,"If set to true, the module will reuse "),e.TgZ(281,"code"),e._uU(282,"class-validator"),e.qZA(),e._uU(283," validation decorators (e.g. "),e.TgZ(284,"code"),e._uU(285,"@Max(10)"),e.qZA(),e._uU(286," will add "),e.TgZ(287,"code"),e._uU(288,"max: 10"),e.qZA(),e._uU(289," to schema definition) "),e.qZA()(),e.TgZ(290,"tr")(291,"td")(292,"code"),e._uU(293,"dtoKeyOfComment"),e.qZA()(),e.TgZ(294,"td")(295,"code"),e._uU(296,"'description'"),e.qZA()(),e.TgZ(297,"td"),e._uU(298,"The property key to set the comment text to on "),e.TgZ(299,"code"),e._uU(300,"ApiProperty"),e.qZA(),e._uU(301,"."),e.qZA()(),e.TgZ(302,"tr")(303,"td")(304,"code"),e._uU(305,"controllerKeyOfComment"),e.qZA()(),e.TgZ(306,"td")(307,"code"),e._uU(308,"'description'"),e.qZA()(),e.TgZ(309,"td"),e._uU(310,"The property key to set the comment text to on "),e.TgZ(311,"code"),e._uU(312,"ApiOperation"),e.qZA(),e._uU(313,"."),e.qZA()(),e.TgZ(314,"tr")(315,"td")(316,"code"),e._uU(317,"introspectComments"),e.qZA()(),e.TgZ(318,"td")(319,"code"),e._uU(320,"false"),e.qZA()(),e.TgZ(321,"td"),e._uU(322,"If set to true, plugin will generate descriptions and example values for properties based on comments"),e.qZA()()(),e.TgZ(323,"p"),e._uU(324,"Make sure to delete the "),e.TgZ(325,"code"),e._uU(326,"/dist"),e.qZA(),e._uU(327," folder and rebuild your application whenever plugin options are updated.\nIf you don't use the CLI but instead have a custom "),e.TgZ(328,"code"),e._uU(329,"webpack"),e.qZA(),e._uU(330," configuration, you can use this plugin in combination with "),e.TgZ(331,"code"),e._uU(332,"ts-loader"),e.qZA(),e._uU(333,":"),e.qZA(),e.TgZ(334,"pre")(335,"code",15),e._uU(336,"\ngetCustomTransformers: (program: any) => ({\n  before: [require('@nestjs/swagger/plugin').before({}, program)]\n}),\n"),e.qZA()(),e.TgZ(337,"h4",16)(338,"span"),e._uU(339,"Integration with "),e.TgZ(340,"code"),e._uU(341,"ts-jest"),e.qZA(),e._uU(342," (e2e tests)"),e.qZA()(),e.TgZ(343,"p"),e._uU(344,"To run e2e tests, "),e.TgZ(345,"code"),e._uU(346,"ts-jest"),e.qZA(),e._uU(347," compiles your source code files on the fly, in memory. This means, it doesn't use Nest CLI compiler and does not apply any plugins or perform AST transformations."),e.qZA(),e.TgZ(348,"p"),e._uU(349,"To enable the plugin, create the following file in your e2e tests directory:"),e.qZA(),e.TgZ(350,"pre")(351,"code",15),e._uU(352,"\nconst transformer = require('@nestjs/swagger/plugin');\n\nmodule.exports.name = 'nestjs-swagger-transformer';\n// you should change the version number anytime you change the configuration below - otherwise, jest will not detect changes\nmodule.exports.version = 1;\n\nmodule.exports.factory = (cs) => {\n  return transformer.before(\n    {\n      // @nestjs/swagger/plugin options (can be empty)\n    },\n    cs.program, // \"cs.tsCompiler.program\" for older versions of Jest (<= v27)\n  );\n};\n"),e.qZA()(),e.TgZ(353,"p"),e._uU(354,"With this in place, import AST transformer within your "),e.TgZ(355,"code"),e._uU(356,"jest"),e.qZA(),e._uU(357," configuration file. By default (in the starter application), e2e tests configuration file is located under the "),e.TgZ(358,"code"),e._uU(359,"test"),e.qZA(),e._uU(360," folder and is named "),e.TgZ(361,"code"),e._uU(362,"jest-e2e.json"),e.qZA(),e._uU(363,"."),e.qZA(),e.TgZ(364,"pre")(365,"code",17),e._uU(366,'\n{\n  ... // other configuration\n  "globals": {\n    "ts-jest": {\n      "astTransformers": {\n        "before": ["<path to the file created above>"]\n      }\n    }\n  }\n}\n'),e.qZA()(),e.TgZ(367,"p"),e._uU(368,"If you use "),e.TgZ(369,"code"),e._uU(370,"jest@^29"),e.qZA(),e._uU(371,", then use the snippet below, as the previous approach got deprecated."),e.qZA(),e.TgZ(372,"pre")(373,"code",17),e._uU(374,'\n{\n  ... // other configuration\n  "transform": {\n    "^.+\\\\.(t|j)s$": [\n      "ts-jest",\n      {\n        "astTransformers": {\n          "before": ["<path to the file created above>"]\n        }\n      }\n    ]\n  }\n}\n'),e.qZA()(),e.TgZ(375,"h4",18)(376,"span"),e._uU(377,"Troubleshooting "),e.TgZ(378,"code"),e._uU(379,"jest"),e.qZA(),e._uU(380," (e2e tests)"),e.qZA()(),e.TgZ(381,"p"),e._uU(382,"In case "),e.TgZ(383,"code"),e._uU(384,"jest"),e.qZA(),e._uU(385," does not seem to pick up your configuration changes, it's possible that Jest has already "),e.TgZ(386,"strong"),e._uU(387,"cached"),e.qZA(),e._uU(388," the build result. To apply the new configuration, you need to clear Jest's cache directory."),e.qZA(),e.TgZ(389,"p"),e._uU(390,"To clear the cache directory, run the following command in your NestJS project folder:"),e.qZA(),e.TgZ(391,"pre")(392,"code",19),e._uU(393,"\n$ npx jest --clearCache\n"),e.qZA()(),e.TgZ(394,"p"),e._uU(395,"In case the automatic cache clearance fails, you can still manually remove the cache folder with the following commands:"),e.qZA(),e.TgZ(396,"pre")(397,"code",19),e._uU(398,'\n# Find jest cache directory (usually /tmp/jest_rs)\n# by running the following command in your NestJS project root\n$ npx jest --showConfig | grep cache\n# ex result:\n#   "cache": true,\n#   "cacheDirectory": "/tmp/jest_rs"\n\n# Remove or empty the Jest cache directory\n$ rm -rf  <cacheDirectory value>\n# ex:\n# rm -rf /tmp/jest_rs\n'),e.qZA()()())},dependencies:[i.U,h.rH],encapsulation:2,changeDetection:0}));class p extends s.y{}(0,a.Z)(p,"\u0275fac",function(){let t;return function(n){return(t||(t=e.n5z(p)))(n||p)}}()),(0,a.Z)(p,"\u0275cmp",e.Xpm({type:p,selectors:[["app-decorators"]],features:[e.qOj],decls:141,vars:0,consts:[[1,"content"],["contentReference",""],[1,"github-links"],["href","https://github.com/nestjs/docs.nestjs.com/edit/master/content/openapi/decorators.md","aria-label","Suggest Edits","title","Suggest Edits"],[1,"fas","fa-edit"],["id","decorators"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0,1)(2,"div",2)(3,"a",3),e._UZ(4,"i",4),e.qZA()(),e.TgZ(5,"h3",5),e._uU(6,"Decorators"),e.qZA(),e.TgZ(7,"p"),e._uU(8,"All of the available OpenAPI decorators have an "),e.TgZ(9,"code"),e._uU(10,"Api"),e.qZA(),e._uU(11," prefix to distinguish them from the core decorators. Below is a full list of the exported decorators along with a designation of the level at which the decorator may be applied."),e.qZA(),e.TgZ(12,"table"),e._UZ(13,"thead"),e.TgZ(14,"tbody")(15,"tr")(16,"td")(17,"code"),e._uU(18,"@ApiBasicAuth()"),e.qZA()(),e.TgZ(19,"td"),e._uU(20,"Method / Controller"),e.qZA()(),e.TgZ(21,"tr")(22,"td")(23,"code"),e._uU(24,"@ApiBearerAuth()"),e.qZA()(),e.TgZ(25,"td"),e._uU(26,"Method / Controller"),e.qZA()(),e.TgZ(27,"tr")(28,"td")(29,"code"),e._uU(30,"@ApiBody()"),e.qZA()(),e.TgZ(31,"td"),e._uU(32,"Method"),e.qZA()(),e.TgZ(33,"tr")(34,"td")(35,"code"),e._uU(36,"@ApiConsumes()"),e.qZA()(),e.TgZ(37,"td"),e._uU(38,"Method / Controller"),e.qZA()(),e.TgZ(39,"tr")(40,"td")(41,"code"),e._uU(42,"@ApiCookieAuth()"),e.qZA()(),e.TgZ(43,"td"),e._uU(44,"Method / Controller"),e.qZA()(),e.TgZ(45,"tr")(46,"td")(47,"code"),e._uU(48,"@ApiExcludeController()"),e.qZA()(),e.TgZ(49,"td"),e._uU(50,"Controller"),e.qZA()(),e.TgZ(51,"tr")(52,"td")(53,"code"),e._uU(54,"@ApiExcludeEndpoint()"),e.qZA()(),e.TgZ(55,"td"),e._uU(56,"Method"),e.qZA()(),e.TgZ(57,"tr")(58,"td")(59,"code"),e._uU(60,"@ApiExtension()"),e.qZA()(),e.TgZ(61,"td"),e._uU(62,"Method"),e.qZA()(),e.TgZ(63,"tr")(64,"td")(65,"code"),e._uU(66,"@ApiExtraModels()"),e.qZA()(),e.TgZ(67,"td"),e._uU(68,"Method / Controller"),e.qZA()(),e.TgZ(69,"tr")(70,"td")(71,"code"),e._uU(72,"@ApiHeader()"),e.qZA()(),e.TgZ(73,"td"),e._uU(74,"Method / Controller"),e.qZA()(),e.TgZ(75,"tr")(76,"td")(77,"code"),e._uU(78,"@ApiHideProperty()"),e.qZA()(),e.TgZ(79,"td"),e._uU(80,"Model"),e.qZA()(),e.TgZ(81,"tr")(82,"td")(83,"code"),e._uU(84,"@ApiOAuth2()"),e.qZA()(),e.TgZ(85,"td"),e._uU(86,"Method / Controller"),e.qZA()(),e.TgZ(87,"tr")(88,"td")(89,"code"),e._uU(90,"@ApiOperation()"),e.qZA()(),e.TgZ(91,"td"),e._uU(92,"Method"),e.qZA()(),e.TgZ(93,"tr")(94,"td")(95,"code"),e._uU(96,"@ApiParam()"),e.qZA()(),e.TgZ(97,"td"),e._uU(98,"Method"),e.qZA()(),e.TgZ(99,"tr")(100,"td")(101,"code"),e._uU(102,"@ApiProduces()"),e.qZA()(),e.TgZ(103,"td"),e._uU(104,"Method / Controller"),e.qZA()(),e.TgZ(105,"tr")(106,"td")(107,"code"),e._uU(108,"@ApiProperty()"),e.qZA()(),e.TgZ(109,"td"),e._uU(110,"Model"),e.qZA()(),e.TgZ(111,"tr")(112,"td")(113,"code"),e._uU(114,"@ApiPropertyOptional()"),e.qZA()(),e.TgZ(115,"td"),e._uU(116,"Model"),e.qZA()(),e.TgZ(117,"tr")(118,"td")(119,"code"),e._uU(120,"@ApiQuery()"),e.qZA()(),e.TgZ(121,"td"),e._uU(122,"Method"),e.qZA()(),e.TgZ(123,"tr")(124,"td")(125,"code"),e._uU(126,"@ApiResponse()"),e.qZA()(),e.TgZ(127,"td"),e._uU(128,"Method / Controller"),e.qZA()(),e.TgZ(129,"tr")(130,"td")(131,"code"),e._uU(132,"@ApiSecurity()"),e.qZA()(),e.TgZ(133,"td"),e._uU(134,"Method / Controller"),e.qZA()(),e.TgZ(135,"tr")(136,"td")(137,"code"),e._uU(138,"@ApiTags()"),e.qZA()(),e.TgZ(139,"td"),e._uU(140,"Method / Controller"),e.qZA()()()()())},encapsulation:2,changeDetection:0}));var f=r(4336),y=r(7297);class c extends s.y{}(0,a.Z)(c,"\u0275fac",function(){let t;return function(n){return(t||(t=e.n5z(c)))(n||c)}}()),(0,a.Z)(c,"\u0275cmp",e.Xpm({type:c,selectors:[["app-introduction"]],features:[e.qOj],decls:175,vars:4,consts:[[1,"content"],["contentReference",""],[1,"github-links"],["href","https://github.com/nestjs/docs.nestjs.com/edit/master/content/openapi/introduction.md","aria-label","Suggest Edits","title","Suggest Edits"],[1,"fas","fa-edit"],["id","introduction"],["rel","nofollow","target","_blank","href","https://swagger.io/specification/"],["rel","nofollow","target","_blank","href","https://github.com/nestjs/swagger"],["appAnchor","","id","installation"],[1,"language-bash"],["appAnchor","","id","bootstrap"],[1,"filename"],["appa6ecf33a9524961a11fe21e6a749f17e5d3ee313",""],[1,"language-typescript"],[1,"info"],["rel","nofollow","target","_blank","href","https://swagger.io/specification/#openapi-document"],["href","/openapi/introduction#document-options"],["src","/assets/swagger1.png"],[1,"warning"],["rel","nofollow","target","_blank","href","https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP"],["appAnchor","","id","document-options"],[1,"language-TypeScript"],["appAnchor","","id","setup-options"],["appAnchor","","id","example"],["rel","nofollow","target","_blank","href","https://github.com/nestjs/nest/tree/master/sample/11-swagger"]],template:function(o,n){if(1&o&&(e.TgZ(0,"div",0,1)(2,"div",2)(3,"a",3),e._UZ(4,"i",4),e.qZA()(),e.TgZ(5,"h3",5),e._uU(6,"Introduction"),e.qZA(),e.TgZ(7,"p"),e._uU(8,"The "),e.TgZ(9,"a",6),e._uU(10,"OpenAPI"),e.qZA(),e._uU(11," specification is a language-agnostic definition format used to describe RESTful APIs. Nest provides a dedicated "),e.TgZ(12,"a",7),e._uU(13,"module"),e.qZA(),e._uU(14," which allows generating such a specification by leveraging decorators."),e.qZA(),e.TgZ(15,"h4",8)(16,"span"),e._uU(17,"Installation"),e.qZA()(),e.TgZ(18,"p"),e._uU(19,"To begin using it, we first install the required dependency."),e.qZA(),e.TgZ(20,"pre")(21,"code",9),e._uU(22,"\n$ npm install --save @nestjs/swagger\n"),e.qZA()(),e.TgZ(23,"h4",10)(24,"span"),e._uU(25,"Bootstrap"),e.qZA()(),e.TgZ(26,"p"),e._uU(27,"Once the installation process is complete, open the "),e.TgZ(28,"code"),e._uU(29,"main.ts"),e.qZA(),e._uU(30," file and initialize Swagger using the "),e.TgZ(31,"code"),e._uU(32,"SwaggerModule"),e.qZA(),e._uU(33," class:"),e.qZA(),e.TgZ(34,"span",11),e._uU(35),e.ALo(36,"extension"),e._UZ(37,"app-tabs",null,12),e.qZA(),e.TgZ(39,"pre")(40,"code",13),e._uU(41,"\nimport { NestFactory } from '@nestjs/core';\nimport { SwaggerModule, DocumentBuilder } from '@nestjs/swagger';\nimport { AppModule } from './app.module';\n\nasync function bootstrap() {\n  const app = await NestFactory.create(AppModule);\n\n  const config = new DocumentBuilder()\n    .setTitle('Cats example')\n    .setDescription('The cats API description')\n    .setVersion('1.0')\n    .addTag('cats')\n    .build();\n  const document = SwaggerModule.createDocument(app, config);\n  SwaggerModule.setup('api', app, document);\n\n  await app.listen(3000);\n}\nbootstrap();\n"),e.qZA()(),e.TgZ(42,"blockquote",14)(43,"strong"),e._uU(44,"Hint"),e.qZA(),e.TgZ(45,"code"),e._uU(46,"document"),e.qZA(),e._uU(47," (returned by the "),e.TgZ(48,"code"),e._uU(49,"SwaggerModule#createDocument()"),e.qZA(),e._uU(50," method) is a serializable object conforming to "),e.TgZ(51,"a",15),e._uU(52,"OpenAPI Document"),e.qZA(),e._uU(53,". Instead of hosting it via HTTP, you could also save it as a JSON/YAML file, and consume it in different ways.\n"),e.qZA(),e.TgZ(54,"p"),e._uU(55,"The "),e.TgZ(56,"code"),e._uU(57,"DocumentBuilder"),e.qZA(),e._uU(58," helps to structure a base document that conforms to the OpenAPI Specification. It provides several methods that allow setting such properties as title, description, version, etc. In order to create a full document (with all HTTP routes defined) we use the "),e.TgZ(59,"code"),e._uU(60,"createDocument()"),e.qZA(),e._uU(61," method of the "),e.TgZ(62,"code"),e._uU(63,"SwaggerModule"),e.qZA(),e._uU(64," class. This method takes two arguments, an application instance and a Swagger options object. Alternatively, we can provide a third argument, which should be of type "),e.TgZ(65,"code"),e._uU(66,"SwaggerDocumentOptions"),e.qZA(),e._uU(67,". More on this in the "),e.TgZ(68,"a",16),e._uU(69,"Document options section"),e.qZA(),e._uU(70,"."),e.qZA(),e.TgZ(71,"p"),e._uU(72,"Once we create a document, we can call the "),e.TgZ(73,"code"),e._uU(74,"setup()"),e.qZA(),e._uU(75," method. It accepts:"),e.qZA(),e.TgZ(76,"ol")(77,"li"),e._uU(78,"The path to mount the Swagger UI"),e.qZA(),e.TgZ(79,"li"),e._uU(80,"An application instance"),e.qZA(),e.TgZ(81,"li"),e._uU(82,"The document object instantiated above"),e.qZA(),e.TgZ(83,"li"),e._uU(84,"Optional configuration parameter (read more "),e.TgZ(85,"a",16),e._uU(86,"here"),e.qZA(),e._uU(87,")"),e.qZA()(),e.TgZ(88,"p"),e._uU(89,"Now you can run the following command to start the HTTP server:"),e.qZA(),e.TgZ(90,"pre")(91,"code",9),e._uU(92,"\n$ npm run start\n"),e.qZA()(),e.TgZ(93,"p"),e._uU(94,"While the application is running, open your browser and navigate to "),e.TgZ(95,"code"),e._uU(96,"http://localhost:3000/api"),e.qZA(),e._uU(97,". You should see the Swagger UI."),e.qZA(),e.TgZ(98,"figure"),e._UZ(99,"img",17),e.qZA(),e.TgZ(100,"p"),e._uU(101,"As you can see, the "),e.TgZ(102,"code"),e._uU(103,"SwaggerModule"),e.qZA(),e._uU(104," automatically reflects all of your endpoints."),e.qZA(),e.TgZ(105,"blockquote",14)(106,"strong"),e._uU(107,"Hint"),e.qZA(),e._uU(108," To generate and download a Swagger JSON file, navigate to "),e.TgZ(109,"code"),e._uU(110,"http://localhost:3000/api-json"),e.qZA(),e._uU(111," (assuming that your Swagger documentation is available under "),e.TgZ(112,"code"),e._uU(113,"http://localhost:3000/api"),e.qZA(),e._uU(114,").\n"),e.qZA(),e.TgZ(115,"blockquote",18)(116,"strong"),e._uU(117,"Warning"),e.qZA(),e._uU(118," When using "),e.TgZ(119,"code"),e._uU(120,"fastify"),e.qZA(),e._uU(121," and "),e.TgZ(122,"code"),e._uU(123,"helmet"),e.qZA(),e._uU(124,", there may be a problem with "),e.TgZ(125,"a",19),e._uU(126,"CSP"),e.qZA(),e._uU(127,", to solve this collision, configure the CSP as shown below:\n"),e.TgZ(128,"pre")(129,"code",13),e._uU(130,"\napp.register(helmet, {\n  contentSecurityPolicy: {\n    directives: {\n      defaultSrc: [`'self'`],\n      styleSrc: [`'self'`, `'unsafe-inline'`],\n      imgSrc: [`'self'`, 'data:', 'validator.swagger.io'],\n      scriptSrc: [`'self'`, `https: 'unsafe-inline'`],\n    },\n  },\n});\n\n// If you are not going to use CSP at all, you can use this:\napp.register(helmet, {\n  contentSecurityPolicy: false,\n});\n"),e.qZA()()(),e.TgZ(131,"h4",20)(132,"span"),e._uU(133,"Document options"),e.qZA()(),e.TgZ(134,"p"),e._uU(135,"When creating a document, it is possible to provide some extra options to fine tune the library's behavior. These options should be of type "),e.TgZ(136,"code"),e._uU(137,"SwaggerDocumentOptions"),e.qZA(),e._uU(138,", which can be the following:"),e.qZA(),e.TgZ(139,"pre")(140,"code",21),e._uU(141,"\nexport interface SwaggerDocumentOptions {\n  /**\n   * List of modules to include in the specification\n   */\n  include?: Function[];\n\n  /**\n   * Additional, extra models that should be inspected and included in the specification\n   */\n  extraModels?: Function[];\n\n  /**\n   * If `true`, swagger will ignore the global prefix set through `setGlobalPrefix()` method\n   */\n  ignoreGlobalPrefix?: boolean;\n\n  /**\n   * If `true`, swagger will also load routes from the modules imported by `include` modules\n   */\n  deepScanRoutes?: boolean;\n\n  /**\n   * Custom operationIdFactory that will be used to generate the `operationId`\n   * based on the `controllerKey` and `methodKey`\n   * @default () => controllerKey_methodKey\n   */\n  operationIdFactory?: (controllerKey: string, methodKey: string) => string;\n}\n"),e.qZA()(),e.TgZ(142,"p"),e._uU(143,"For example, if you want to make sure that the library generates operation names like "),e.TgZ(144,"code"),e._uU(145,"createUser"),e.qZA(),e._uU(146," instead of "),e.TgZ(147,"code"),e._uU(148,"UserController_createUser"),e.qZA(),e._uU(149,", you can set the following:"),e.qZA(),e.TgZ(150,"pre")(151,"code",21),e._uU(152,"\nconst options: SwaggerDocumentOptions =  {\n  operationIdFactory: (\n    controllerKey: string,\n    methodKey: string\n  ) => methodKey\n};\nconst document = SwaggerModule.createDocument(app, config, options);\n"),e.qZA()(),e.TgZ(153,"h4",22)(154,"span"),e._uU(155,"Setup options"),e.qZA()(),e.TgZ(156,"p"),e._uU(157,"You can configure Swagger UI by passing the options object which fulfills the "),e.TgZ(158,"code"),e._uU(159,"ExpressSwaggerCustomOptions"),e.qZA(),e._uU(160," (if you use express) interface as a fourth argument of the "),e.TgZ(161,"code"),e._uU(162,"SwaggerModule#setup"),e.qZA(),e._uU(163," method."),e.qZA(),e.TgZ(164,"pre")(165,"code",21),e._uU(166,"\nexport interface ExpressSwaggerCustomOptions {\n  explorer?: boolean;\n  swaggerOptions?: Record<string, any>;\n  customCss?: string;\n  customCssUrl?: string;\n  customJs?: string;\n  customfavIcon?: string;\n  swaggerUrl?: string;\n  customSiteTitle?: string;\n  validatorUrl?: string;\n  url?: string;\n  urls?: Record<'url' | 'name', string>[];\n}\n"),e.qZA()(),e.TgZ(167,"h4",23)(168,"span"),e._uU(169,"Example"),e.qZA()(),e.TgZ(170,"p"),e._uU(171,"A working example is available "),e.TgZ(172,"a",24),e._uU(173,"here"),e.qZA(),e._uU(174,"."),e.qZA()()),2&o){const P=e.MAs(38);e.xp6(35),e.hij(" ",e.xi3(36,1,"main",P.isJsActive),"\n")}},dependencies:[f.n,i.U,y.F],encapsulation:2,changeDetection:0}));class d extends s.y{}(0,a.Z)(d,"\u0275fac",function(){let t;return function(n){return(t||(t=e.n5z(d)))(n||d)}}()),(0,a.Z)(d,"\u0275cmp",e.Xpm({type:d,selectors:[["app-mapped-types"]],features:[e.qOj],decls:169,vars:0,consts:[[1,"content"],["contentReference",""],[1,"github-links"],["href","https://github.com/nestjs/docs.nestjs.com/edit/master/content/openapi/mapped-types.md","aria-label","Suggest Edits","title","Suggest Edits"],[1,"fas","fa-edit"],["id","mapped-types"],["appAnchor","","id","partial"],[1,"language-typescript"],[1,"info"],["appAnchor","","id","pick"],["appAnchor","","id","omit"],["appAnchor","","id","intersection"],["appAnchor","","id","composition"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0,1)(2,"div",2)(3,"a",3),e._UZ(4,"i",4),e.qZA()(),e.TgZ(5,"h3",5),e._uU(6,"Mapped types"),e.qZA(),e.TgZ(7,"p"),e._uU(8,"As you build out features like "),e.TgZ(9,"strong"),e._uU(10,"CRUD"),e.qZA(),e._uU(11," (Create/Read/Update/Delete) it's often useful to construct variants on a base entity type. Nest provides several utility functions that perform type transformations to make this task more convenient."),e.qZA(),e.TgZ(12,"h4",6)(13,"span"),e._uU(14,"Partial"),e.qZA()(),e.TgZ(15,"p"),e._uU(16,"When building input validation types (also called DTOs), it's often useful to build "),e.TgZ(17,"strong"),e._uU(18,"create"),e.qZA(),e._uU(19," and "),e.TgZ(20,"strong"),e._uU(21,"update"),e.qZA(),e._uU(22," variations on the same type. For example, the "),e.TgZ(23,"strong"),e._uU(24,"create"),e.qZA(),e._uU(25," variant may require all fields, while the "),e.TgZ(26,"strong"),e._uU(27,"update"),e.qZA(),e._uU(28," variant may make all fields optional."),e.qZA(),e.TgZ(29,"p"),e._uU(30,"Nest provides the "),e.TgZ(31,"code"),e._uU(32,"PartialType()"),e.qZA(),e._uU(33," utility function to make this task easier and minimize boilerplate."),e.qZA(),e.TgZ(34,"p"),e._uU(35,"The "),e.TgZ(36,"code"),e._uU(37,"PartialType()"),e.qZA(),e._uU(38," function returns a type (class) with all the properties of the input type set to optional. For example, suppose we have a "),e.TgZ(39,"strong"),e._uU(40,"create"),e.qZA(),e._uU(41," type as follows:"),e.qZA(),e.TgZ(42,"pre")(43,"code",7),e._uU(44,"\nimport { ApiProperty } from '@nestjs/swagger';\n\nexport class CreateCatDto {\n  @ApiProperty()\n  name: string;\n\n  @ApiProperty()\n  age: number;\n\n  @ApiProperty()\n  breed: string;\n}\n"),e.qZA()(),e.TgZ(45,"p"),e._uU(46,"By default, all of these fields are required. To create a type with the same fields, but with each one optional, use "),e.TgZ(47,"code"),e._uU(48,"PartialType()"),e.qZA(),e._uU(49," passing the class reference ("),e.TgZ(50,"code"),e._uU(51,"CreateCatDto"),e.qZA(),e._uU(52,") as an argument:"),e.qZA(),e.TgZ(53,"pre")(54,"code",7),e._uU(55,"\nexport class UpdateCatDto extends PartialType(CreateCatDto) {}\n"),e.qZA()(),e.TgZ(56,"blockquote",8)(57,"strong"),e._uU(58,"Hint"),e.qZA(),e._uU(59," The "),e.TgZ(60,"code"),e._uU(61,"PartialType()"),e.qZA(),e._uU(62," function is imported from the "),e.TgZ(63,"code"),e._uU(64,"@nestjs/swagger"),e.qZA(),e._uU(65," package.\n"),e.qZA(),e.TgZ(66,"h4",9)(67,"span"),e._uU(68,"Pick"),e.qZA()(),e.TgZ(69,"p"),e._uU(70,"The "),e.TgZ(71,"code"),e._uU(72,"PickType()"),e.qZA(),e._uU(73," function constructs a new type (class) by picking a set of properties from an input type. For example, suppose we start with a type like:"),e.qZA(),e.TgZ(74,"pre")(75,"code",7),e._uU(76,"\nimport { ApiProperty } from '@nestjs/swagger';\n\nexport class CreateCatDto {\n  @ApiProperty()\n  name: string;\n\n  @ApiProperty()\n  age: number;\n\n  @ApiProperty()\n  breed: string;\n}\n"),e.qZA()(),e.TgZ(77,"p"),e._uU(78,"We can pick a set of properties from this class using the "),e.TgZ(79,"code"),e._uU(80,"PickType()"),e.qZA(),e._uU(81," utility function:"),e.qZA(),e.TgZ(82,"pre")(83,"code",7),e._uU(84,"\nexport class UpdateCatAgeDto extends PickType(CreateCatDto, ['age'] as const) {}\n"),e.qZA()(),e.TgZ(85,"blockquote",8)(86,"strong"),e._uU(87,"Hint"),e.qZA(),e._uU(88," The "),e.TgZ(89,"code"),e._uU(90,"PickType()"),e.qZA(),e._uU(91," function is imported from the "),e.TgZ(92,"code"),e._uU(93,"@nestjs/swagger"),e.qZA(),e._uU(94," package.\n"),e.qZA(),e.TgZ(95,"h4",10)(96,"span"),e._uU(97,"Omit"),e.qZA()(),e.TgZ(98,"p"),e._uU(99,"The "),e.TgZ(100,"code"),e._uU(101,"OmitType()"),e.qZA(),e._uU(102," function constructs a type by picking all properties from an input type and then removing a particular set of keys. For example, suppose we start with a type like:"),e.qZA(),e.TgZ(103,"pre")(104,"code",7),e._uU(105,"\nimport { ApiProperty } from '@nestjs/swagger';\n\nexport class CreateCatDto {\n  @ApiProperty()\n  name: string;\n\n  @ApiProperty()\n  age: number;\n\n  @ApiProperty()\n  breed: string;\n}\n"),e.qZA()(),e.TgZ(106,"p"),e._uU(107,"We can generate a derived type that has every property "),e.TgZ(108,"strong"),e._uU(109,"except"),e.qZA(),e.TgZ(110,"code"),e._uU(111,"name"),e.qZA(),e._uU(112," as shown below. In this construct, the second argument to "),e.TgZ(113,"code"),e._uU(114,"OmitType"),e.qZA(),e._uU(115," is an array of property names."),e.qZA(),e.TgZ(116,"pre")(117,"code",7),e._uU(118,"\nexport class UpdateCatDto extends OmitType(CreateCatDto, ['name'] as const) {}\n"),e.qZA()(),e.TgZ(119,"blockquote",8)(120,"strong"),e._uU(121,"Hint"),e.qZA(),e._uU(122," The "),e.TgZ(123,"code"),e._uU(124,"OmitType()"),e.qZA(),e._uU(125," function is imported from the "),e.TgZ(126,"code"),e._uU(127,"@nestjs/swagger"),e.qZA(),e._uU(128," package.\n"),e.qZA(),e.TgZ(129,"h4",11)(130,"span"),e._uU(131,"Intersection"),e.qZA()(),e.TgZ(132,"p"),e._uU(133,"The "),e.TgZ(134,"code"),e._uU(135,"IntersectionType()"),e.qZA(),e._uU(136," function combines two types into one new type (class). For example, suppose we start with two types like:"),e.qZA(),e.TgZ(137,"pre")(138,"code",7),e._uU(139,"\nimport { ApiProperty } from '@nestjs/swagger';\n\nexport class CreateCatDto {\n  @ApiProperty()\n  name: string;\n\n  @ApiProperty()\n  breed: string;\n}\n\nexport class AdditionalCatInfo {\n  @ApiProperty()\n  color: string;\n}\n"),e.qZA()(),e.TgZ(140,"p"),e._uU(141,"We can generate a new type that combines all properties in both types."),e.qZA(),e.TgZ(142,"pre")(143,"code",7),e._uU(144,"\nexport class UpdateCatDto extends IntersectionType(\n  CreateCatDto,\n  AdditionalCatInfo,\n) {}\n"),e.qZA()(),e.TgZ(145,"blockquote",8)(146,"strong"),e._uU(147,"Hint"),e.qZA(),e._uU(148," The "),e.TgZ(149,"code"),e._uU(150,"IntersectionType()"),e.qZA(),e._uU(151," function is imported from the "),e.TgZ(152,"code"),e._uU(153,"@nestjs/swagger"),e.qZA(),e._uU(154," package.\n"),e.qZA(),e.TgZ(155,"h4",12)(156,"span"),e._uU(157,"Composition"),e.qZA()(),e.TgZ(158,"p"),e._uU(159,"The type mapping utility functions are composable. For example, the following will produce a type (class) that has all of the properties of the "),e.TgZ(160,"code"),e._uU(161,"CreateCatDto"),e.qZA(),e._uU(162," type except for "),e.TgZ(163,"code"),e._uU(164,"name"),e.qZA(),e._uU(165,", and those properties will be set to optional:"),e.qZA(),e.TgZ(166,"pre")(167,"code",7),e._uU(168,"\nexport class UpdateCatDto extends PartialType(\n  OmitType(CreateCatDto, ['name'] as const),\n) {}\n"),e.qZA()()())},dependencies:[i.U],encapsulation:2,changeDetection:0}));var w=r(7710);class g extends s.y{}(0,a.Z)(g,"\u0275fac",function(){let t;return function(n){return(t||(t=e.n5z(g)))(n||g)}}()),(0,a.Z)(g,"\u0275cmp",e.Xpm({type:g,selectors:[["app-openapi-migration"]],features:[e.qOj],decls:129,vars:4,consts:[[1,"content"],["contentReference",""],[1,"github-links"],["href","https://github.com/nestjs/docs.nestjs.com/edit/master/content/openapi/migration-guide.md","aria-label","Suggest Edits","title","Suggest Edits"],[1,"fas","fa-edit"],["id","migration-guide"],["appAnchor","","id","breaking-changes"],["appAnchor","","id","new-methods"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0,1)(2,"div",2)(3,"a",3),e._UZ(4,"i",4),e.qZA()(),e.TgZ(5,"h3",5),e._uU(6,"Migration guide"),e.qZA(),e.TgZ(7,"p"),e._uU(8,"If you're currently using "),e.TgZ(9,"code"),e._uU(10,"@nestjs/swagger@3.*"),e.qZA(),e._uU(11,", note the following breaking/API changes in version 4.0."),e.qZA(),e.TgZ(12,"h4",6)(13,"span"),e._uU(14,"Breaking changes"),e.qZA()(),e.TgZ(15,"p"),e._uU(16,"The following decorators have been changed/renamed:"),e.qZA(),e.TgZ(17,"ul")(18,"li")(19,"code"),e._uU(20,"@ApiModelProperty"),e.qZA(),e._uU(21," is now "),e.TgZ(22,"code"),e._uU(23,"@ApiProperty"),e.qZA()(),e.TgZ(24,"li")(25,"code"),e._uU(26,"@ApiModelPropertyOptional"),e.qZA(),e._uU(27," is now "),e.TgZ(28,"code"),e._uU(29,"@ApiPropertyOptional"),e.qZA()(),e.TgZ(30,"li")(31,"code"),e._uU(32,"@ApiResponseModelProperty"),e.qZA(),e._uU(33," is now "),e.TgZ(34,"code"),e._uU(35,"@ApiResponseProperty"),e.qZA()(),e.TgZ(36,"li")(37,"code"),e._uU(38,"@ApiImplicitQuery"),e.qZA(),e._uU(39," is now "),e.TgZ(40,"code"),e._uU(41,"@ApiQuery"),e.qZA()(),e.TgZ(42,"li")(43,"code"),e._uU(44,"@ApiImplicitParam"),e.qZA(),e._uU(45," is now "),e.TgZ(46,"code"),e._uU(47,"@ApiParam"),e.qZA()(),e.TgZ(48,"li")(49,"code"),e._uU(50,"@ApiImplicitBody"),e.qZA(),e._uU(51," is now "),e.TgZ(52,"code"),e._uU(53,"@ApiBody"),e.qZA()(),e.TgZ(54,"li")(55,"code"),e._uU(56,"@ApiImplicitHeader"),e.qZA(),e._uU(57," is now "),e.TgZ(58,"code"),e._uU(59,"@ApiHeader"),e.qZA()(),e.TgZ(60,"li")(61,"code"),e._uU(62),e.qZA(),e._uU(63," is now "),e.TgZ(64,"code"),e._uU(65),e.qZA()(),e.TgZ(66,"li")(67,"code"),e._uU(68,"@ApiUseTags"),e.qZA(),e._uU(69," is now "),e.TgZ(70,"code"),e._uU(71,"@ApiTags"),e.qZA()()(),e.TgZ(72,"p")(73,"code"),e._uU(74,"DocumentBuilder"),e.qZA(),e._uU(75," breaking changes (updated method signatures):"),e.qZA(),e.TgZ(76,"ul")(77,"li")(78,"code"),e._uU(79,"addTag"),e.qZA()(),e.TgZ(80,"li")(81,"code"),e._uU(82,"addBearerAuth"),e.qZA()(),e.TgZ(83,"li")(84,"code"),e._uU(85,"addOAuth2"),e.qZA()(),e.TgZ(86,"li")(87,"code"),e._uU(88,"setContactEmail"),e.qZA(),e._uU(89," is now "),e.TgZ(90,"code"),e._uU(91,"setContact"),e.qZA()(),e.TgZ(92,"li")(93,"code"),e._uU(94,"setHost"),e.qZA(),e._uU(95," has been removed"),e.qZA(),e.TgZ(96,"li")(97,"code"),e._uU(98,"setSchemes"),e.qZA(),e._uU(99," has been removed (use the "),e.TgZ(100,"code"),e._uU(101,"addServer"),e.qZA(),e._uU(102," instead, e.g., "),e.TgZ(103,"code"),e._uU(104,"addServer('http://')"),e.qZA(),e._uU(105,")"),e.qZA()(),e.TgZ(106,"h4",7)(107,"span"),e._uU(108,"New methods"),e.qZA()(),e.TgZ(109,"p"),e._uU(110,"The following methods have been added:"),e.qZA(),e.TgZ(111,"ul")(112,"li")(113,"code"),e._uU(114,"addServer"),e.qZA()(),e.TgZ(115,"li")(116,"code"),e._uU(117,"addApiKey"),e.qZA()(),e.TgZ(118,"li")(119,"code"),e._uU(120,"addBasicAuth"),e.qZA()(),e.TgZ(121,"li")(122,"code"),e._uU(123,"addSecurity"),e.qZA()(),e.TgZ(124,"li")(125,"code"),e._uU(126,"addSecurityRequirements"),e.qZA()()(),e.TgZ(127,"p"),e._UZ(128,"app-banner-shop"),e.qZA()()),2&o&&(e.xp6(62),e.AsE("@ApiOperation(","{"," title: 'test' ","}",")"),e.xp6(3),e.AsE("@ApiOperation(","{"," summary: 'test' ","}",")"))},dependencies:[i.U,w.f],encapsulation:2,changeDetection:0}));class l extends s.y{}(0,a.Z)(l,"\u0275fac",function(){let t;return function(n){return(t||(t=e.n5z(l)))(n||l)}}()),(0,a.Z)(l,"\u0275cmp",e.Xpm({type:l,selectors:[["app-openapi-operations"]],features:[e.qOj],decls:358,vars:0,consts:[[1,"content"],["contentReference",""],[1,"github-links"],["href","https://github.com/nestjs/docs.nestjs.com/edit/master/content/openapi/operations.md","aria-label","Suggest Edits","title","Suggest Edits"],[1,"fas","fa-edit"],["id","operations"],["appAnchor","","id","tags"],[1,"language-typescript"],["appAnchor","","id","headers"],["appAnchor","","id","responses"],["src","/assets/swagger-response-type.png"],["appAnchor","","id","file-upload"],["routerLink","/techniques/file-upload"],["appAnchor","","id","extensions"],["appAnchor","","id","advanced-generic-apiresponse"],["href","/openapi/types-and-parameters#raw-definitions"],[1,"language-ts"],["href","/openapi/types-and-parameters#extra-models"],[1,"language-json"],[1,"info"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0,1)(2,"div",2)(3,"a",3),e._UZ(4,"i",4),e.qZA()(),e.TgZ(5,"h3",5),e._uU(6,"Operations"),e.qZA(),e.TgZ(7,"p"),e._uU(8,"In OpenAPI terms, paths are endpoints (resources), such as "),e.TgZ(9,"code"),e._uU(10,"/users"),e.qZA(),e._uU(11," or "),e.TgZ(12,"code"),e._uU(13,"/reports/summary"),e.qZA(),e._uU(14,", that your API exposes, and operations are the HTTP methods used to manipulate these paths, such as "),e.TgZ(15,"code"),e._uU(16,"GET"),e.qZA(),e._uU(17,", "),e.TgZ(18,"code"),e._uU(19,"POST"),e.qZA(),e._uU(20," or "),e.TgZ(21,"code"),e._uU(22,"DELETE"),e.qZA(),e._uU(23,"."),e.qZA(),e.TgZ(24,"h4",6)(25,"span"),e._uU(26,"Tags"),e.qZA()(),e.TgZ(27,"p"),e._uU(28,"To attach a controller to a specific tag, use the "),e.TgZ(29,"code"),e._uU(30,"@ApiTags(...tags)"),e.qZA(),e._uU(31," decorator."),e.qZA(),e.TgZ(32,"pre")(33,"code",7),e._uU(34,"\n@ApiTags('cats')\n@Controller('cats')\nexport class CatsController {}\n"),e.qZA()(),e.TgZ(35,"h4",8)(36,"span"),e._uU(37,"Headers"),e.qZA()(),e.TgZ(38,"p"),e._uU(39,"To define custom headers that are expected as part of the request, use "),e.TgZ(40,"code"),e._uU(41,"@ApiHeader()"),e.qZA(),e._uU(42,"."),e.qZA(),e.TgZ(43,"pre")(44,"code",7),e._uU(45,"\n@ApiHeader({\n  name: 'X-MyHeader',\n  description: 'Custom header',\n})\n@Controller('cats')\nexport class CatsController {}\n"),e.qZA()(),e.TgZ(46,"h4",9)(47,"span"),e._uU(48,"Responses"),e.qZA()(),e.TgZ(49,"p"),e._uU(50,"To define a custom HTTP response, use the "),e.TgZ(51,"code"),e._uU(52,"@ApiResponse()"),e.qZA(),e._uU(53," decorator."),e.qZA(),e.TgZ(54,"pre")(55,"code",7),e._uU(56,"\n@Post()\n@ApiResponse({ status: 201, description: 'The record has been successfully created.'})\n@ApiResponse({ status: 403, description: 'Forbidden.'})\nasync create(@Body() createCatDto: CreateCatDto) {\n  this.catsService.create(createCatDto);\n}\n"),e.qZA()(),e.TgZ(57,"p"),e._uU(58,"Nest provides a set of short-hand "),e.TgZ(59,"strong"),e._uU(60,"API response"),e.qZA(),e._uU(61," decorators that inherit from the "),e.TgZ(62,"code"),e._uU(63,"@ApiResponse"),e.qZA(),e._uU(64," decorator:"),e.qZA(),e.TgZ(65,"ul")(66,"li")(67,"code"),e._uU(68,"@ApiOkResponse()"),e.qZA()(),e.TgZ(69,"li")(70,"code"),e._uU(71,"@ApiCreatedResponse()"),e.qZA()(),e.TgZ(72,"li")(73,"code"),e._uU(74,"@ApiAcceptedResponse()"),e.qZA()(),e.TgZ(75,"li")(76,"code"),e._uU(77,"@ApiNoContentResponse()"),e.qZA()(),e.TgZ(78,"li")(79,"code"),e._uU(80,"@ApiMovedPermanentlyResponse()"),e.qZA()(),e.TgZ(81,"li")(82,"code"),e._uU(83,"@ApiFoundResponse()"),e.qZA()(),e.TgZ(84,"li")(85,"code"),e._uU(86,"@ApiBadRequestResponse()"),e.qZA()(),e.TgZ(87,"li")(88,"code"),e._uU(89,"@ApiUnauthorizedResponse()"),e.qZA()(),e.TgZ(90,"li")(91,"code"),e._uU(92,"@ApiNotFoundResponse()"),e.qZA()(),e.TgZ(93,"li")(94,"code"),e._uU(95,"@ApiForbiddenResponse()"),e.qZA()(),e.TgZ(96,"li")(97,"code"),e._uU(98,"@ApiMethodNotAllowedResponse()"),e.qZA()(),e.TgZ(99,"li")(100,"code"),e._uU(101,"@ApiNotAcceptableResponse()"),e.qZA()(),e.TgZ(102,"li")(103,"code"),e._uU(104,"@ApiRequestTimeoutResponse()"),e.qZA()(),e.TgZ(105,"li")(106,"code"),e._uU(107,"@ApiConflictResponse()"),e.qZA()(),e.TgZ(108,"li")(109,"code"),e._uU(110,"@ApiPreconditionFailedResponse()"),e.qZA()(),e.TgZ(111,"li")(112,"code"),e._uU(113,"@ApiTooManyRequestsResponse()"),e.qZA()(),e.TgZ(114,"li")(115,"code"),e._uU(116,"@ApiGoneResponse()"),e.qZA()(),e.TgZ(117,"li")(118,"code"),e._uU(119,"@ApiPayloadTooLargeResponse()"),e.qZA()(),e.TgZ(120,"li")(121,"code"),e._uU(122,"@ApiUnsupportedMediaTypeResponse()"),e.qZA()(),e.TgZ(123,"li")(124,"code"),e._uU(125,"@ApiUnprocessableEntityResponse()"),e.qZA()(),e.TgZ(126,"li")(127,"code"),e._uU(128,"@ApiInternalServerErrorResponse()"),e.qZA()(),e.TgZ(129,"li")(130,"code"),e._uU(131,"@ApiNotImplementedResponse()"),e.qZA()(),e.TgZ(132,"li")(133,"code"),e._uU(134,"@ApiBadGatewayResponse()"),e.qZA()(),e.TgZ(135,"li")(136,"code"),e._uU(137,"@ApiServiceUnavailableResponse()"),e.qZA()(),e.TgZ(138,"li")(139,"code"),e._uU(140,"@ApiGatewayTimeoutResponse()"),e.qZA()(),e.TgZ(141,"li")(142,"code"),e._uU(143,"@ApiDefaultResponse()"),e.qZA()()(),e.TgZ(144,"pre")(145,"code",7),e._uU(146,"\n@Post()\n@ApiCreatedResponse({ description: 'The record has been successfully created.'})\n@ApiForbiddenResponse({ description: 'Forbidden.'})\nasync create(@Body() createCatDto: CreateCatDto) {\n  this.catsService.create(createCatDto);\n}\n"),e.qZA()(),e.TgZ(147,"p"),e._uU(148,"To specify a return model for a request, we must create a class and annotate all properties with the "),e.TgZ(149,"code"),e._uU(150,"@ApiProperty()"),e.qZA(),e._uU(151," decorator."),e.qZA(),e.TgZ(152,"pre")(153,"code",7),e._uU(154,"\nexport class Cat {\n  @ApiProperty()\n  id: number;\n\n  @ApiProperty()\n  name: string;\n\n  @ApiProperty()\n  age: number;\n\n  @ApiProperty()\n  breed: string;\n}\n"),e.qZA()(),e.TgZ(155,"p"),e._uU(156,"Then the "),e.TgZ(157,"code"),e._uU(158,"Cat"),e.qZA(),e._uU(159," model can be used in combination with the "),e.TgZ(160,"code"),e._uU(161,"type"),e.qZA(),e._uU(162," property of the response decorator."),e.qZA(),e.TgZ(163,"pre")(164,"code",7),e._uU(165,"\n@ApiTags('cats')\n@Controller('cats')\nexport class CatsController {\n  @Post()\n  @ApiCreatedResponse({\n    description: 'The record has been successfully created.',\n    type: Cat,\n  })\n  async create(@Body() createCatDto: CreateCatDto): Promise<Cat> {\n    return this.catsService.create(createCatDto);\n  }\n}\n"),e.qZA()(),e.TgZ(166,"p"),e._uU(167,"Let's open the browser and verify the generated "),e.TgZ(168,"code"),e._uU(169,"Cat"),e.qZA(),e._uU(170," model:"),e.qZA(),e.TgZ(171,"figure"),e._UZ(172,"img",10),e.qZA(),e.TgZ(173,"h4",11)(174,"span"),e._uU(175,"File upload"),e.qZA()(),e.TgZ(176,"p"),e._uU(177,"You can enable file upload for a specific method with the "),e.TgZ(178,"code"),e._uU(179,"@ApiBody"),e.qZA(),e._uU(180," decorator together with "),e.TgZ(181,"code"),e._uU(182,"@ApiConsumes()"),e.qZA(),e._uU(183,". Here's a full example using the "),e.TgZ(184,"a",12),e._uU(185,"File Upload"),e.qZA(),e._uU(186," technique:"),e.qZA(),e.TgZ(187,"pre")(188,"code",7),e._uU(189,"\n@UseInterceptors(FileInterceptor('file'))\n@ApiConsumes('multipart/form-data')\n@ApiBody({\n  description: 'List of cats',\n  type: FileUploadDto,\n})\nuploadFile(@UploadedFile() file) {}\n"),e.qZA()(),e.TgZ(190,"p"),e._uU(191,"Where "),e.TgZ(192,"code"),e._uU(193,"FileUploadDto"),e.qZA(),e._uU(194," is defined as follows:"),e.qZA(),e.TgZ(195,"pre")(196,"code",7),e._uU(197,"\nclass FileUploadDto {\n  @ApiProperty({ type: 'string', format: 'binary' })\n  file: any;\n}\n"),e.qZA()(),e.TgZ(198,"p"),e._uU(199,"To handle multiple files uploading, you can define "),e.TgZ(200,"code"),e._uU(201,"FilesUploadDto"),e.qZA(),e._uU(202," as follows:"),e.qZA(),e.TgZ(203,"pre")(204,"code",7),e._uU(205,"\nclass FilesUploadDto {\n  @ApiProperty({ type: 'array', items: { type: 'string', format: 'binary' } })\n  files: any[];\n}\n"),e.qZA()(),e.TgZ(206,"h4",13)(207,"span"),e._uU(208,"Extensions"),e.qZA()(),e.TgZ(209,"p"),e._uU(210,"To add an Extension to a request use the "),e.TgZ(211,"code"),e._uU(212,"@ApiExtension()"),e.qZA(),e._uU(213," decorator. The extension name must be prefixed with "),e.TgZ(214,"code"),e._uU(215,"x-"),e.qZA(),e._uU(216,"."),e.qZA(),e.TgZ(217,"pre")(218,"code",7),e._uU(219,"\n@ApiExtension('x-foo', { hello: 'world' })\n"),e.qZA()(),e.TgZ(220,"h4",14)(221,"span"),e._uU(222,"Advanced: Generic "),e.TgZ(223,"code"),e._uU(224,"ApiResponse"),e.qZA()()(),e.TgZ(225,"p"),e._uU(226,"With the ability to provide "),e.TgZ(227,"a",15),e._uU(228,"Raw Definitions"),e.qZA(),e._uU(229,", we can define Generic schema for Swagger UI. Assume we have the following DTO:"),e.qZA(),e.TgZ(230,"pre")(231,"code",16),e._uU(232,"\nexport class PaginatedDto<TData> {\n  @ApiProperty()\n  total: number;\n\n  @ApiProperty()\n  limit: number;\n\n  @ApiProperty()\n  offset: number;\n\n  results: TData[];\n}\n"),e.qZA()(),e.TgZ(233,"p"),e._uU(234,"We skip decorating "),e.TgZ(235,"code"),e._uU(236,"results"),e.qZA(),e._uU(237," as we will be providing a raw definition for it later. Now, let's define another DTO and name it, for example, "),e.TgZ(238,"code"),e._uU(239,"CatDto"),e.qZA(),e._uU(240,", as follows:"),e.qZA(),e.TgZ(241,"pre")(242,"code",16),e._uU(243,"\nexport class CatDto {\n  @ApiProperty()\n  name: string;\n\n  @ApiProperty()\n  age: number;\n\n  @ApiProperty()\n  breed: string;\n}\n"),e.qZA()(),e.TgZ(244,"p"),e._uU(245,"With this in place, we can define a "),e.TgZ(246,"code"),e._uU(247,"PaginatedDto<CatDto>"),e.qZA(),e._uU(248," response, as follows:"),e.qZA(),e.TgZ(249,"pre")(250,"code",16),e._uU(251,"\n@ApiOkResponse({\n  schema: {\n    allOf: [\n      { $ref: getSchemaPath(PaginatedDto) },\n      {\n        properties: {\n          results: {\n            type: 'array',\n            items: { $ref: getSchemaPath(CatDto) },\n          },\n        },\n      },\n    ],\n  },\n})\nasync findAll(): Promise<PaginatedDto<CatDto>> {}\n"),e.qZA()(),e.TgZ(252,"p"),e._uU(253,"In this example, we specify that the response will have allOf "),e.TgZ(254,"code"),e._uU(255,"PaginatedDto"),e.qZA(),e._uU(256," and the "),e.TgZ(257,"code"),e._uU(258,"results"),e.qZA(),e._uU(259," property will be of type "),e.TgZ(260,"code"),e._uU(261,"Array<CatDto>"),e.qZA(),e._uU(262,"."),e.qZA(),e.TgZ(263,"ul")(264,"li")(265,"code"),e._uU(266,"getSchemaPath()"),e.qZA(),e._uU(267," function that returns the OpenAPI Schema path from within the OpenAPI Spec File for a given model."),e.qZA(),e.TgZ(268,"li")(269,"code"),e._uU(270,"allOf"),e.qZA(),e._uU(271," is a concept that OAS 3 provides to cover various Inheritance related use-cases."),e.qZA()(),e.TgZ(272,"p"),e._uU(273,"Lastly, since "),e.TgZ(274,"code"),e._uU(275,"PaginatedDto"),e.qZA(),e._uU(276," is not directly referenced by any controller, the "),e.TgZ(277,"code"),e._uU(278,"SwaggerModule"),e.qZA(),e._uU(279," will not be able to generate a corresponding model definition just yet. In this case, we must add it as an "),e.TgZ(280,"a",17),e._uU(281,"Extra Model"),e.qZA(),e._uU(282,". For example, we can use the "),e.TgZ(283,"code"),e._uU(284,"@ApiExtraModels()"),e.qZA(),e._uU(285," decorator on the controller level, as follows:"),e.qZA(),e.TgZ(286,"pre")(287,"code",16),e._uU(288,"\n@Controller('cats')\n@ApiExtraModels(PaginatedDto)\nexport class CatsController {}\n"),e.qZA()(),e.TgZ(289,"p"),e._uU(290,"If you run Swagger now, the generated "),e.TgZ(291,"code"),e._uU(292,"swagger.json"),e.qZA(),e._uU(293," for this specific endpoint should have the following response defined:"),e.qZA(),e.TgZ(294,"pre")(295,"code",18),e._uU(296,'\n"responses": {\n  "200": {\n    "description": "",\n    "content": {\n      "application/json": {\n        "schema": {\n          "allOf": [\n            {\n              "$ref": "#/components/schemas/PaginatedDto"\n            },\n            {\n              "properties": {\n                "results": {\n                  "$ref": "#/components/schemas/CatDto"\n                }\n              }\n            }\n          ]\n        }\n      }\n    }\n  }\n}\n'),e.qZA()(),e.TgZ(297,"p"),e._uU(298,"To make it reusable, we can create a custom decorator for "),e.TgZ(299,"code"),e._uU(300,"PaginatedDto"),e.qZA(),e._uU(301,", as follows:"),e.qZA(),e.TgZ(302,"pre")(303,"code",16),e._uU(304,"\nexport const ApiPaginatedResponse = <TModel extends Type<any>>(\n  model: TModel,\n) => {\n  return applyDecorators(\n    ApiOkResponse({\n      schema: {\n        allOf: [\n          { $ref: getSchemaPath(PaginatedDto) },\n          {\n            properties: {\n              results: {\n                type: 'array',\n                items: { $ref: getSchemaPath(model) },\n              },\n            },\n          },\n        ],\n      },\n    }),\n  );\n};\n"),e.qZA()(),e.TgZ(305,"blockquote",19)(306,"strong"),e._uU(307,"Hint"),e.qZA(),e.TgZ(308,"code"),e._uU(309,"Type<any>"),e.qZA(),e._uU(310," interface and "),e.TgZ(311,"code"),e._uU(312,"applyDecorators"),e.qZA(),e._uU(313," function are imported from the "),e.TgZ(314,"code"),e._uU(315,"@nestjs/common"),e.qZA(),e._uU(316," package.\n"),e.qZA(),e.TgZ(317,"p"),e._uU(318,"With this in place, we can use the custom "),e.TgZ(319,"code"),e._uU(320,"@ApiPaginatedResponse()"),e.qZA(),e._uU(321," decorator on our endpoint:"),e.qZA(),e.TgZ(322,"pre")(323,"code",16),e._uU(324,"\n@ApiPaginatedResponse(CatDto)\nasync findAll(): Promise<PaginatedDto<CatDto>> {}\n"),e.qZA()(),e.TgZ(325,"p"),e._uU(326,"For client generation tools, this approach poses an ambiguity in how the "),e.TgZ(327,"code"),e._uU(328,"PaginatedResponse<TModel>"),e.qZA(),e._uU(329," is being generated for the client. The following snippet is an example of a client generator result for the above "),e.TgZ(330,"code"),e._uU(331,"GET /"),e.qZA(),e._uU(332," endpoint."),e.qZA(),e.TgZ(333,"pre")(334,"code",7),e._uU(335,"\n// Angular\nfindAll(): Observable<{ total: number, limit: number, offset: number, results: CatDto[] }>\n"),e.qZA()(),e.TgZ(336,"p"),e._uU(337,"As you can see, the "),e.TgZ(338,"strong"),e._uU(339,"Return Type"),e.qZA(),e._uU(340," here is ambiguous. To workaround this issue, you can add a "),e.TgZ(341,"code"),e._uU(342,"title"),e.qZA(),e._uU(343," property to the "),e.TgZ(344,"code"),e._uU(345,"schema"),e.qZA(),e._uU(346," for "),e.TgZ(347,"code"),e._uU(348,"ApiPaginatedResponse"),e.qZA(),e._uU(349,":"),e.qZA(),e.TgZ(350,"pre")(351,"code",7),e._uU(352,"\nexport const ApiPaginatedResponse = <TModel extends Type<any>>(model: TModel) => {\n  return applyDecorators(\n    ApiOkResponse({\n      schema: {\n        title: `PaginatedResponseOf${model.name}`\n        allOf: [\n          // ...\n        ],\n      },\n    }),\n  );\n};\n"),e.qZA()(),e.TgZ(353,"p"),e._uU(354,"Now the result of the client generator tool will become:"),e.qZA(),e.TgZ(355,"pre")(356,"code",16),e._uU(357,"\n// Angular\nfindAll(): Observable<PaginatedResponseOfCatDto>\n"),e.qZA()()())},dependencies:[i.U,h.rH],encapsulation:2,changeDetection:0}));class Z extends s.y{}(0,a.Z)(Z,"\u0275fac",function(){let t;return function(n){return(t||(t=e.n5z(Z)))(n||Z)}}()),(0,a.Z)(Z,"\u0275cmp",e.Xpm({type:Z,selectors:[["app-openapi-other-features"]],features:[e.qOj],decls:69,vars:0,consts:[[1,"content"],["contentReference",""],[1,"github-links"],["href","https://github.com/nestjs/docs.nestjs.com/edit/master/content/openapi/other-features.md","aria-label","Suggest Edits","title","Suggest Edits"],[1,"fas","fa-edit"],["id","other-features"],["appAnchor","","id","global-prefix"],[1,"language-typescript"],["appAnchor","","id","multiple-specifications"],[1,"language-bash"],["src","/assets/swagger-cats.png"],["src","/assets/swagger-dogs.png"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0,1)(2,"div",2)(3,"a",3),e._UZ(4,"i",4),e.qZA()(),e.TgZ(5,"h3",5),e._uU(6,"Other features"),e.qZA(),e.TgZ(7,"p"),e._uU(8,"This page lists all the other available features that you may find useful."),e.qZA(),e.TgZ(9,"h4",6)(10,"span"),e._uU(11,"Global prefix"),e.qZA()(),e.TgZ(12,"p"),e._uU(13,"To ignore a global prefix for routes set through "),e.TgZ(14,"code"),e._uU(15,"setGlobalPrefix()"),e.qZA(),e._uU(16,", use "),e.TgZ(17,"code"),e._uU(18,"ignoreGlobalPrefix"),e.qZA(),e._uU(19,":"),e.qZA(),e.TgZ(20,"pre")(21,"code",7),e._uU(22,"\nconst document = SwaggerModule.createDocument(app, options, {\n  ignoreGlobalPrefix: true,\n});\n"),e.qZA()(),e.TgZ(23,"h4",8)(24,"span"),e._uU(25,"Multiple specifications"),e.qZA()(),e.TgZ(26,"p"),e._uU(27,"The "),e.TgZ(28,"code"),e._uU(29,"SwaggerModule"),e.qZA(),e._uU(30," provides a way to support multiple specifications. In other words, you can serve different documentation, with different UIs, on different endpoints."),e.qZA(),e.TgZ(31,"p"),e._uU(32,"To support multiple specifications, your application must be written with a modular approach. The "),e.TgZ(33,"code"),e._uU(34,"createDocument()"),e.qZA(),e._uU(35," method takes a 3rd argument, "),e.TgZ(36,"code"),e._uU(37,"extraOptions"),e.qZA(),e._uU(38,", which is an object with a property named "),e.TgZ(39,"code"),e._uU(40,"include"),e.qZA(),e._uU(41,". The "),e.TgZ(42,"code"),e._uU(43,"include"),e.qZA(),e._uU(44," property takes a value which is an array of modules."),e.qZA(),e.TgZ(45,"p"),e._uU(46,"You can setup multiple specifications support as shown below:"),e.qZA(),e.TgZ(47,"pre")(48,"code",7),e._uU(49,"\nimport { NestFactory } from '@nestjs/core';\nimport { SwaggerModule, DocumentBuilder } from '@nestjs/swagger';\nimport { AppModule } from './app.module';\nimport { CatsModule } from './cats/cats.module';\nimport { DogsModule } from './dogs/dogs.module';\n\nasync function bootstrap() {\n  const app = await NestFactory.create(AppModule);\n\n  /**\n   * createDocument(application, configurationOptions, extraOptions);\n   *\n   * createDocument method takes an optional 3rd argument \"extraOptions\"\n   * which is an object with \"include\" property where you can pass an Array\n   * of Modules that you want to include in that Swagger Specification\n   * E.g: CatsModule and DogsModule will have two separate Swagger Specifications which\n   * will be exposed on two different SwaggerUI with two different endpoints.\n   */\n\n  const options = new DocumentBuilder()\n    .setTitle('Cats example')\n    .setDescription('The cats API description')\n    .setVersion('1.0')\n    .addTag('cats')\n    .build();\n\n  const catDocument = SwaggerModule.createDocument(app, options, {\n    include: [CatsModule],\n  });\n  SwaggerModule.setup('api/cats', app, catDocument);\n\n  const secondOptions = new DocumentBuilder()\n    .setTitle('Dogs example')\n    .setDescription('The dogs API description')\n    .setVersion('1.0')\n    .addTag('dogs')\n    .build();\n\n  const dogDocument = SwaggerModule.createDocument(app, secondOptions, {\n    include: [DogsModule],\n  });\n  SwaggerModule.setup('api/dogs', app, dogDocument);\n\n  await app.listen(3000);\n}\nbootstrap();\n"),e.qZA()(),e.TgZ(50,"p"),e._uU(51,"Now you can start your server with the following command:"),e.qZA(),e.TgZ(52,"pre")(53,"code",9),e._uU(54,"\n$ npm run start\n"),e.qZA()(),e.TgZ(55,"p"),e._uU(56,"Navigate to "),e.TgZ(57,"code"),e._uU(58,"http://localhost:3000/api/cats"),e.qZA(),e._uU(59," to see the Swagger UI for cats:"),e.qZA(),e.TgZ(60,"figure"),e._UZ(61,"img",10),e.qZA(),e.TgZ(62,"p"),e._uU(63,"In turn, "),e.TgZ(64,"code"),e._uU(65,"http://localhost:3000/api/dogs"),e.qZA(),e._uU(66," will expose the Swagger UI for dogs:"),e.qZA(),e.TgZ(67,"figure"),e._UZ(68,"img",11),e.qZA()())},dependencies:[i.U],encapsulation:2,changeDetection:0}));class A extends s.y{}(0,a.Z)(A,"\u0275fac",function(){let t;return function(n){return(t||(t=e.n5z(A)))(n||A)}}()),(0,a.Z)(A,"\u0275cmp",e.Xpm({type:A,selectors:[["app-openapi-security"]],features:[e.qOj],decls:107,vars:0,consts:[[1,"content"],["contentReference",""],[1,"github-links"],["href","https://github.com/nestjs/docs.nestjs.com/edit/master/content/openapi/security.md","aria-label","Suggest Edits","title","Suggest Edits"],[1,"fas","fa-edit"],["id","security"],[1,"language-typescript"],["appAnchor","","id","basic-authentication"],["appAnchor","","id","bearer-authentication"],["appAnchor","","id","oauth2-authentication"],["appAnchor","","id","cookie-authentication"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0,1)(2,"div",2)(3,"a",3),e._UZ(4,"i",4),e.qZA()(),e.TgZ(5,"h3",5),e._uU(6,"Security"),e.qZA(),e.TgZ(7,"p"),e._uU(8,"To define which security mechanisms should be used for a specific operation, use the "),e.TgZ(9,"code"),e._uU(10,"@ApiSecurity()"),e.qZA(),e._uU(11," decorator."),e.qZA(),e.TgZ(12,"pre")(13,"code",6),e._uU(14,"\n@ApiSecurity('basic')\n@Controller('cats')\nexport class CatsController {}\n"),e.qZA()(),e.TgZ(15,"p"),e._uU(16,"Before you run your application, remember to add the security definition to your base document using "),e.TgZ(17,"code"),e._uU(18,"DocumentBuilder"),e.qZA(),e._uU(19,":"),e.qZA(),e.TgZ(20,"pre")(21,"code",6),e._uU(22,"\nconst options = new DocumentBuilder().addSecurity('basic', {\n  type: 'http',\n  scheme: 'basic',\n});\n"),e.qZA()(),e.TgZ(23,"p"),e._uU(24,"Some of the most popular authentication techniques are built-in (e.g., "),e.TgZ(25,"code"),e._uU(26,"basic"),e.qZA(),e._uU(27," and "),e.TgZ(28,"code"),e._uU(29,"bearer"),e.qZA(),e._uU(30,") and therefore you don't have to define security mechanisms manually as shown above."),e.qZA(),e.TgZ(31,"h4",7)(32,"span"),e._uU(33,"Basic authentication"),e.qZA()(),e.TgZ(34,"p"),e._uU(35,"To enable basic authentication, use "),e.TgZ(36,"code"),e._uU(37,"@ApiBasicAuth()"),e.qZA(),e._uU(38,"."),e.qZA(),e.TgZ(39,"pre")(40,"code",6),e._uU(41,"\n@ApiBasicAuth()\n@Controller('cats')\nexport class CatsController {}\n"),e.qZA()(),e.TgZ(42,"p"),e._uU(43,"Before you run your application, remember to add the security definition to your base document using "),e.TgZ(44,"code"),e._uU(45,"DocumentBuilder"),e.qZA(),e._uU(46,":"),e.qZA(),e.TgZ(47,"pre")(48,"code",6),e._uU(49,"\nconst options = new DocumentBuilder().addBasicAuth();\n"),e.qZA()(),e.TgZ(50,"h4",8)(51,"span"),e._uU(52,"Bearer authentication"),e.qZA()(),e.TgZ(53,"p"),e._uU(54,"To enable bearer authentication, use "),e.TgZ(55,"code"),e._uU(56,"@ApiBearerAuth()"),e.qZA(),e._uU(57,"."),e.qZA(),e.TgZ(58,"pre")(59,"code",6),e._uU(60,"\n@ApiBearerAuth()\n@Controller('cats')\nexport class CatsController {}\n"),e.qZA()(),e.TgZ(61,"p"),e._uU(62,"Before you run your application, remember to add the security definition to your base document using "),e.TgZ(63,"code"),e._uU(64,"DocumentBuilder"),e.qZA(),e._uU(65,":"),e.qZA(),e.TgZ(66,"pre")(67,"code",6),e._uU(68,"\nconst options = new DocumentBuilder().addBearerAuth();\n"),e.qZA()(),e.TgZ(69,"h4",9)(70,"span"),e._uU(71,"OAuth2 authentication"),e.qZA()(),e.TgZ(72,"p"),e._uU(73,"To enable OAuth2, use "),e.TgZ(74,"code"),e._uU(75,"@ApiOAuth2()"),e.qZA(),e._uU(76,"."),e.qZA(),e.TgZ(77,"pre")(78,"code",6),e._uU(79,"\n@ApiOAuth2(['pets:write'])\n@Controller('cats')\nexport class CatsController {}\n"),e.qZA()(),e.TgZ(80,"p"),e._uU(81,"Before you run your application, remember to add the security definition to your base document using "),e.TgZ(82,"code"),e._uU(83,"DocumentBuilder"),e.qZA(),e._uU(84,":"),e.qZA(),e.TgZ(85,"pre")(86,"code",6),e._uU(87,"\nconst options = new DocumentBuilder().addOAuth2();\n"),e.qZA()(),e.TgZ(88,"h4",10)(89,"span"),e._uU(90,"Cookie authentication"),e.qZA()(),e.TgZ(91,"p"),e._uU(92,"To enable cookie authentication, use "),e.TgZ(93,"code"),e._uU(94,"@ApiCookieAuth()"),e.qZA(),e._uU(95,"."),e.qZA(),e.TgZ(96,"pre")(97,"code",6),e._uU(98,"\n@ApiCookieAuth()\n@Controller('cats')\nexport class CatsController {}\n"),e.qZA()(),e.TgZ(99,"p"),e._uU(100,"Before you run your application, remember to add the security definition to your base document using "),e.TgZ(101,"code"),e._uU(102,"DocumentBuilder"),e.qZA(),e._uU(103,":"),e.qZA(),e.TgZ(104,"pre")(105,"code",6),e._uU(106,"\nconst options = new DocumentBuilder().addCookieAuth('optional-session-id');\n"),e.qZA()()())},encapsulation:2,changeDetection:0}));var b=r(8568);class U extends s.y{}(0,a.Z)(U,"\u0275fac",function(){let t;return function(n){return(t||(t=e.n5z(U)))(n||U)}}()),(0,a.Z)(U,"\u0275cmp",e.Xpm({type:U,selectors:[["app-openapi-types-parameters"]],features:[e.qOj],decls:395,vars:1,consts:[[1,"content"],["contentReference",""],[1,"github-links"],["href","https://github.com/nestjs/docs.nestjs.com/edit/master/content/openapi/types-and-parameters.md","aria-label","Suggest Edits","title","Suggest Edits"],[1,"fas","fa-edit"],["id","types-and-parameters"],[1,"language-typescript"],[1,"info"],["src","/assets/swagger-dto.png"],["routerLink","/openapi/cli-plugin"],["src","/assets/swagger-dto2.png"],["rel","nofollow","target","_blank","href","https://swagger.io/specification/#schemaObject"],["appAnchor","","id","arrays"],["appAnchor","","id","circular-dependencies"],["appAnchor","","id","generics-and-interfaces"],["appAnchor","","id","enums"],["src","/assets/enum_query.gif"],["src","/assets/enum_query_array.gif"],["appAnchor","","id","enums-schema"],["rel","nofollow","target","_blank","href","https://swagger.io/docs/specification/data-models/enums/"],[1,"language-yaml"],["rel","nofollow","target","_blank","href","https://github.com/RicoSuter/NSwag"],["appAnchor","","id","raw-definitions"],["appAnchor","","id","extra-models"],["appAnchor","","id","oneof-anyof-allof"],["rel","nofollow","target","_blank","href","https://swagger.io/docs/specification/data-models/oneof-anyof-allof-not/"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0,1)(2,"div",2)(3,"a",3),e._UZ(4,"i",4),e.qZA()(),e.TgZ(5,"h3",5),e._uU(6,"Types and parameters"),e.qZA(),e.TgZ(7,"p"),e._uU(8,"The "),e.TgZ(9,"code"),e._uU(10,"SwaggerModule"),e.qZA(),e._uU(11," searches for all "),e.TgZ(12,"code"),e._uU(13,"@Body()"),e.qZA(),e._uU(14,", "),e.TgZ(15,"code"),e._uU(16,"@Query()"),e.qZA(),e._uU(17,", and "),e.TgZ(18,"code"),e._uU(19,"@Param()"),e.qZA(),e._uU(20," decorators in route handlers to generate the API document. It also creates corresponding model definitions by taking advantage of reflection. Consider the following code:"),e.qZA(),e.TgZ(21,"pre")(22,"code",6),e._uU(23,"\n@Post()\nasync create(@Body() createCatDto: CreateCatDto) {\n  this.catsService.create(createCatDto);\n}\n"),e.qZA()(),e.TgZ(24,"blockquote",7)(25,"strong"),e._uU(26,"Hint"),e.qZA(),e._uU(27," To explicitly set the body definition use the "),e.TgZ(28,"code"),e._uU(29,"@ApiBody()"),e.qZA(),e._uU(30," decorator (imported from the "),e.TgZ(31,"code"),e._uU(32,"@nestjs/swagger"),e.qZA(),e._uU(33," package).\n"),e.qZA(),e.TgZ(34,"p"),e._uU(35,"Based on the "),e.TgZ(36,"code"),e._uU(37,"CreateCatDto"),e.qZA(),e._uU(38,", the following model definition Swagger UI will be created:"),e.qZA(),e.TgZ(39,"figure"),e._UZ(40,"img",8),e.qZA(),e.TgZ(41,"p"),e._uU(42,"As you can see, the definition is empty although the class has a few declared properties. In order to make the class properties visible to the "),e.TgZ(43,"code"),e._uU(44,"SwaggerModule"),e.qZA(),e._uU(45,", we have to either annotate them with the "),e.TgZ(46,"code"),e._uU(47,"@ApiProperty()"),e.qZA(),e._uU(48," decorator or use the CLI plugin (read more in the "),e.TgZ(49,"strong"),e._uU(50,"Plugin"),e.qZA(),e._uU(51," section) which will do it automatically:"),e.qZA(),e.TgZ(52,"pre")(53,"code",6),e._uU(54,"\nimport { ApiProperty } from '@nestjs/swagger';\n\nexport class CreateCatDto {\n  @ApiProperty()\n  name: string;\n\n  @ApiProperty()\n  age: number;\n\n  @ApiProperty()\n  breed: string;\n}\n"),e.qZA()(),e.TgZ(55,"blockquote",7)(56,"strong"),e._uU(57,"Hint"),e.qZA(),e._uU(58," Instead of manually annotating each property, consider using the Swagger plugin (see "),e.TgZ(59,"a",9),e._uU(60,"Plugin"),e.qZA(),e._uU(61," section) which will automatically provide this for you.\n"),e.qZA(),e.TgZ(62,"p"),e._uU(63,"Let's open the browser and verify the generated "),e.TgZ(64,"code"),e._uU(65,"CreateCatDto"),e.qZA(),e._uU(66," model:"),e.qZA(),e.TgZ(67,"figure"),e._UZ(68,"img",10),e.qZA(),e.TgZ(69,"p"),e._uU(70,"In addition, the "),e.TgZ(71,"code"),e._uU(72,"@ApiProperty()"),e.qZA(),e._uU(73," decorator allows setting various "),e.TgZ(74,"a",11),e._uU(75,"Schema Object"),e.qZA(),e._uU(76," properties:"),e.qZA(),e.TgZ(77,"pre")(78,"code",6),e._uU(79,"\n@ApiProperty({\n  description: 'The age of a cat',\n  minimum: 1,\n  default: 1,\n})\nage: number;\n"),e.qZA()(),e.TgZ(80,"blockquote",7)(81,"strong"),e._uU(82,"Hint"),e.qZA(),e._uU(83," Instead of explicitly typing the "),e.TgZ(84,"code"),e._uU(85),e.qZA(),e._uU(86," you can use the "),e.TgZ(87,"code"),e._uU(88,"@ApiPropertyOptional()"),e.qZA(),e._uU(89," short-hand decorator.\n"),e.qZA(),e.TgZ(90,"p"),e._uU(91,"In order to explicitly set the type of the property, use the "),e.TgZ(92,"code"),e._uU(93,"type"),e.qZA(),e._uU(94," key:"),e.qZA(),e.TgZ(95,"pre")(96,"code",6),e._uU(97,"\n@ApiProperty({\n  type: Number,\n})\nage: number;\n"),e.qZA()(),e.TgZ(98,"h4",12)(99,"span"),e._uU(100,"Arrays"),e.qZA()(),e.TgZ(101,"p"),e._uU(102,"When the property is an array, we must manually indicate the array type as shown below:"),e.qZA(),e.TgZ(103,"pre")(104,"code",6),e._uU(105,"\n@ApiProperty({ type: [String] })\nnames: string[];\n"),e.qZA()(),e.TgZ(106,"blockquote",7)(107,"strong"),e._uU(108,"Hint"),e.qZA(),e._uU(109," Consider using the Swagger plugin (see "),e.TgZ(110,"a",9),e._uU(111,"Plugin"),e.qZA(),e._uU(112," section) which will automatically detect arrays.\n"),e.qZA(),e.TgZ(113,"p"),e._uU(114,"Either include the type as the first element of an array (as shown above) or set the "),e.TgZ(115,"code"),e._uU(116,"isArray"),e.qZA(),e._uU(117," property to "),e.TgZ(118,"code"),e._uU(119,"true"),e.qZA(),e._uU(120,"."),e.qZA(),e.TgZ(121,"p"),e._UZ(122,"app-banner-enterprise"),e.qZA(),e.TgZ(123,"h4",13)(124,"span"),e._uU(125,"Circular dependencies"),e.qZA()(),e.TgZ(126,"p"),e._uU(127,"When you have circular dependencies between classes, use a lazy function to provide the "),e.TgZ(128,"code"),e._uU(129,"SwaggerModule"),e.qZA(),e._uU(130," with type information:"),e.qZA(),e.TgZ(131,"pre")(132,"code",6),e._uU(133,"\n@ApiProperty({ type: () => Node })\nnode: Node;\n"),e.qZA()(),e.TgZ(134,"blockquote",7)(135,"strong"),e._uU(136,"Hint"),e.qZA(),e._uU(137," Consider using the Swagger plugin (see "),e.TgZ(138,"a",9),e._uU(139,"Plugin"),e.qZA(),e._uU(140," section) which will automatically detect circular dependencies.\n"),e.qZA(),e.TgZ(141,"h4",14)(142,"span"),e._uU(143,"Generics and interfaces"),e.qZA()(),e.TgZ(144,"p"),e._uU(145,"Since TypeScript does not store metadata about generics or interfaces, when you use them in your DTOs, "),e.TgZ(146,"code"),e._uU(147,"SwaggerModule"),e.qZA(),e._uU(148," may not be able to properly generate model definitions at runtime. For instance, the following code won't be correctly inspected by the Swagger module:"),e.qZA(),e.TgZ(149,"pre")(150,"code",6),e._uU(151,"\ncreateBulk(@Body() usersDto: CreateUserDto[])\n"),e.qZA()(),e.TgZ(152,"p"),e._uU(153,"In order to overcome this limitation, you can set the type explicitly:"),e.qZA(),e.TgZ(154,"pre")(155,"code",6),e._uU(156,"\n@ApiBody({ type: [CreateUserDto] })\ncreateBulk(@Body() usersDto: CreateUserDto[])\n"),e.qZA()(),e.TgZ(157,"h4",15)(158,"span"),e._uU(159,"Enums"),e.qZA()(),e.TgZ(160,"p"),e._uU(161,"To identify an "),e.TgZ(162,"code"),e._uU(163,"enum"),e.qZA(),e._uU(164,", we must manually set the "),e.TgZ(165,"code"),e._uU(166,"enum"),e.qZA(),e._uU(167," property on the "),e.TgZ(168,"code"),e._uU(169,"@ApiProperty"),e.qZA(),e._uU(170," with an array of values."),e.qZA(),e.TgZ(171,"pre")(172,"code",6),e._uU(173,"\n@ApiProperty({ enum: ['Admin', 'Moderator', 'User']})\nrole: UserRole;\n"),e.qZA()(),e.TgZ(174,"p"),e._uU(175,"Alternatively, define an actual TypeScript enum as follows:"),e.qZA(),e.TgZ(176,"pre")(177,"code",6),e._uU(178,"\nexport enum UserRole {\n  Admin = 'Admin',\n  Moderator = 'Moderator',\n  User = 'User',\n}\n"),e.qZA()(),e.TgZ(179,"p"),e._uU(180,"You can then use the enum directly with the "),e.TgZ(181,"code"),e._uU(182,"@Query()"),e.qZA(),e._uU(183," parameter decorator in combination with the "),e.TgZ(184,"code"),e._uU(185,"@ApiQuery()"),e.qZA(),e._uU(186," decorator."),e.qZA(),e.TgZ(187,"pre")(188,"code",6),e._uU(189,"\n@ApiQuery({ name: 'role', enum: UserRole })\nasync filterByRole(@Query('role') role: UserRole = UserRole.User) {}\n"),e.qZA()(),e.TgZ(190,"figure"),e._UZ(191,"img",16),e.qZA(),e.TgZ(192,"p"),e._uU(193,"With "),e.TgZ(194,"code"),e._uU(195,"isArray"),e.qZA(),e._uU(196," set to "),e.TgZ(197,"strong"),e._uU(198,"true"),e.qZA(),e._uU(199,", the "),e.TgZ(200,"code"),e._uU(201,"enum"),e.qZA(),e._uU(202," can be selected as a "),e.TgZ(203,"strong"),e._uU(204,"multi-select"),e.qZA(),e._uU(205,":"),e.qZA(),e.TgZ(206,"figure"),e._UZ(207,"img",17),e.qZA(),e.TgZ(208,"h4",18)(209,"span"),e._uU(210,"Enums schema"),e.qZA()(),e.TgZ(211,"p"),e._uU(212,"By default, the "),e.TgZ(213,"code"),e._uU(214,"enum"),e.qZA(),e._uU(215," property will add a raw definition of "),e.TgZ(216,"a",19),e._uU(217,"Enum"),e.qZA(),e._uU(218," on the "),e.TgZ(219,"code"),e._uU(220,"parameter"),e.qZA(),e._uU(221,"."),e.qZA(),e.TgZ(222,"pre")(223,"code",20),e._uU(224,"\n- breed:\n    type: 'string'\n    enum:\n      - Persian\n      - Tabby\n      - Siamese\n"),e.qZA()(),e.TgZ(225,"p"),e._uU(226,"The above specification works fine for most cases. However, if you are utilizing a tool that takes the specification as "),e.TgZ(227,"strong"),e._uU(228,"input"),e.qZA(),e._uU(229," and generates "),e.TgZ(230,"strong"),e._uU(231,"client-side"),e.qZA(),e._uU(232," code, you might run into a problem with the generated code containing duplicated "),e.TgZ(233,"code"),e._uU(234,"enums"),e.qZA(),e._uU(235,". Consider the following code snippet:"),e.qZA(),e.TgZ(236,"pre")(237,"code",6),e._uU(238,"\n// generated client-side code\nexport class CatDetail {\n  breed: CatDetailEnum;\n}\n\nexport class CatInformation {\n  breed: CatInformationEnum;\n}\n\nexport enum CatDetailEnum {\n  Persian = 'Persian',\n  Tabby = 'Tabby',\n  Siamese = 'Siamese',\n}\n\nexport enum CatInformationEnum {\n  Persian = 'Persian',\n  Tabby = 'Tabby',\n  Siamese = 'Siamese',\n}\n"),e.qZA()(),e.TgZ(239,"blockquote",7)(240,"strong"),e._uU(241,"Hint"),e.qZA(),e._uU(242," The above snippet is generated using a tool called "),e.TgZ(243,"a",21),e._uU(244,"NSwag"),e.qZA(),e._uU(245,".\n"),e.qZA(),e.TgZ(246,"p"),e._uU(247,"You can see that now you have two "),e.TgZ(248,"code"),e._uU(249,"enums"),e.qZA(),e._uU(250," that are exactly the same.\nTo address this issue, you can pass an "),e.TgZ(251,"code"),e._uU(252,"enumName"),e.qZA(),e._uU(253," along with the "),e.TgZ(254,"code"),e._uU(255,"enum"),e.qZA(),e._uU(256," property in your decorator."),e.qZA(),e.TgZ(257,"pre")(258,"code",6),e._uU(259,"\nexport class CatDetail {\n  @ApiProperty({ enum: CatBreed, enumName: 'CatBreed' })\n  breed: CatBreed;\n}\n"),e.qZA()(),e.TgZ(260,"p"),e._uU(261,"The "),e.TgZ(262,"code"),e._uU(263,"enumName"),e.qZA(),e._uU(264," property enables "),e.TgZ(265,"code"),e._uU(266,"@nestjs/swagger"),e.qZA(),e._uU(267," to turn "),e.TgZ(268,"code"),e._uU(269,"CatBreed"),e.qZA(),e._uU(270," into its own "),e.TgZ(271,"code"),e._uU(272,"schema"),e.qZA(),e._uU(273," which in turns makes "),e.TgZ(274,"code"),e._uU(275,"CatBreed"),e.qZA(),e._uU(276," enum reusable. The specification will look like the following:"),e.qZA(),e.TgZ(277,"pre")(278,"code",20),e._uU(279,"\nCatDetail:\n  type: 'object'\n  properties:\n    ...\n    - breed:\n        schema:\n          $ref: '#/components/schemas/CatBreed'\nCatBreed:\n  type: string\n  enum:\n    - Persian\n    - Tabby\n    - Siamese\n"),e.qZA()(),e.TgZ(280,"blockquote",7)(281,"strong"),e._uU(282,"Hint"),e.qZA(),e._uU(283," Any "),e.TgZ(284,"strong"),e._uU(285,"decorator"),e.qZA(),e._uU(286," that takes "),e.TgZ(287,"code"),e._uU(288,"enum"),e.qZA(),e._uU(289," as a property will also take "),e.TgZ(290,"code"),e._uU(291,"enumName"),e.qZA(),e._uU(292,".\n"),e.qZA(),e.TgZ(293,"h4",22)(294,"span"),e._uU(295,"Raw definitions"),e.qZA()(),e.TgZ(296,"p"),e._uU(297,"In some specific scenarios (e.g., deeply nested arrays, matrices), you may want to describe your type by hand."),e.qZA(),e.TgZ(298,"pre")(299,"code",6),e._uU(300,"\n@ApiProperty({\n  type: 'array',\n  items: {\n    type: 'array',\n    items: {\n      type: 'number',\n    },\n  },\n})\ncoords: number[][];\n"),e.qZA()(),e.TgZ(301,"p"),e._uU(302,"Likewise, in order to define your input/output content manually in controller classes, use the "),e.TgZ(303,"code"),e._uU(304,"schema"),e.qZA(),e._uU(305," property:"),e.qZA(),e.TgZ(306,"pre")(307,"code",6),e._uU(308,"\n@ApiBody({\n  schema: {\n    type: 'array',\n    items: {\n      type: 'array',\n      items: {\n        type: 'number',\n      },\n    },\n  },\n})\nasync create(@Body() coords: number[][]) {}\n"),e.qZA()(),e.TgZ(309,"h4",23)(310,"span"),e._uU(311,"Extra models"),e.qZA()(),e.TgZ(312,"p"),e._uU(313,"To define additional models that are not directly referenced in your controllers but should be inspected by the Swagger module, use the "),e.TgZ(314,"code"),e._uU(315,"@ApiExtraModels()"),e.qZA(),e._uU(316," decorator:"),e.qZA(),e.TgZ(317,"pre")(318,"code",6),e._uU(319,"\n@ApiExtraModels(ExtraModel)\nexport class CreateCatDto {}\n"),e.qZA()(),e.TgZ(320,"blockquote",7)(321,"strong"),e._uU(322,"Hint"),e.qZA(),e._uU(323," You only need to use "),e.TgZ(324,"code"),e._uU(325,"@ApiExtraModels()"),e.qZA(),e._uU(326," once for a specific model class.\n"),e.qZA(),e.TgZ(327,"p"),e._uU(328,"Alternatively, you can pass an options object with the "),e.TgZ(329,"code"),e._uU(330,"extraModels"),e.qZA(),e._uU(331," property specified to the "),e.TgZ(332,"code"),e._uU(333,"SwaggerModule#createDocument()"),e.qZA(),e._uU(334," method, as follows:"),e.qZA(),e.TgZ(335,"pre")(336,"code",6),e._uU(337,"\nconst document = SwaggerModule.createDocument(app, options, {\n  extraModels: [ExtraModel],\n});\n"),e.qZA()(),e.TgZ(338,"p"),e._uU(339,"To get a reference ("),e.TgZ(340,"code"),e._uU(341,"$ref"),e.qZA(),e._uU(342,") to your model, use the "),e.TgZ(343,"code"),e._uU(344,"getSchemaPath(ExtraModel)"),e.qZA(),e._uU(345," function:"),e.qZA(),e.TgZ(346,"pre")(347,"code",6),e._uU(348,"\n'application/vnd.api+json': {\n   schema: { $ref: getSchemaPath(ExtraModel) },\n},\n"),e.qZA()(),e.TgZ(349,"h4",24)(350,"span"),e._uU(351,"oneOf, anyOf, allOf"),e.qZA()(),e.TgZ(352,"p"),e._uU(353,"To combine schemas, you can use the "),e.TgZ(354,"code"),e._uU(355,"oneOf"),e.qZA(),e._uU(356,", "),e.TgZ(357,"code"),e._uU(358,"anyOf"),e.qZA(),e._uU(359," or "),e.TgZ(360,"code"),e._uU(361,"allOf"),e.qZA(),e._uU(362," keywords ("),e.TgZ(363,"a",25),e._uU(364,"read more"),e.qZA(),e._uU(365,")."),e.qZA(),e.TgZ(366,"pre")(367,"code",6),e._uU(368,"\n@ApiProperty({\n  oneOf: [\n    { $ref: getSchemaPath(Cat) },\n    { $ref: getSchemaPath(Dog) },\n  ],\n})\npet: Cat | Dog;\n"),e.qZA()(),e.TgZ(369,"p"),e._uU(370,"If you want to define a polymorphic array (i.e., an array whose members span multiple schemas), you should use a raw definition (see above) to define your type by hand."),e.qZA(),e.TgZ(371,"pre")(372,"code",6),e._uU(373,"\ntype Pet = Cat | Dog;\n\n@ApiProperty({\n  type: 'array',\n  items: {\n    oneOf: [\n      { $ref: getSchemaPath(Cat) },\n      { $ref: getSchemaPath(Dog) },\n    ],\n  },\n})\npets: Pet[];\n"),e.qZA()(),e.TgZ(374,"blockquote",7)(375,"strong"),e._uU(376,"Hint"),e.qZA(),e._uU(377," The "),e.TgZ(378,"code"),e._uU(379,"getSchemaPath()"),e.qZA(),e._uU(380," function is imported from "),e.TgZ(381,"code"),e._uU(382,"@nestjs/swagger"),e.qZA(),e._uU(383,".\n"),e.qZA(),e.TgZ(384,"p"),e._uU(385,"Both "),e.TgZ(386,"code"),e._uU(387,"Cat"),e.qZA(),e._uU(388," and "),e.TgZ(389,"code"),e._uU(390,"Dog"),e.qZA(),e._uU(391," must be defined as extra models using the "),e.TgZ(392,"code"),e._uU(393,"@ApiExtraModels()"),e.qZA(),e._uU(394," decorator (at the class-level)."),e.qZA()()),2&o&&(e.xp6(85),e.Oqu("@ApiProperty({ required: false })"))},dependencies:[i.U,b.V,h.rH],encapsulation:2,changeDetection:0}));const C=[{path:"introduction",component:c,data:{title:"OpenAPI (Swagger)"}},{path:"types-and-parameters",component:U,data:{title:"Types and Parameters - OpenAPI"}},{path:"operations",component:l,data:{title:"Operations - OpenAPI"}},{path:"security",component:A,data:{title:"Security - OpenAPI"}},{path:"decorators",component:p,data:{title:"Decorators - OpenAPI"}},{path:"mapped-types",component:d,data:{title:"Mapped Types - OpenAPI"}},{path:"cli-plugin",component:u,data:{title:"CLI Plugin - OpenAPI"}},{path:"other-features",component:Z,data:{title:"Other features - OpenAPI"}},{path:"migration-guide",component:g,data:{title:"Migration guide - OpenAPI"}}];class _{}(0,a.Z)(_,"\u0275fac",function(o){return new(o||_)}),(0,a.Z)(_,"\u0275mod",e.oAB({type:_})),(0,a.Z)(_,"\u0275inj",e.cJS({imports:[m.ez,q.m,h.Bz.forChild(C)]}))}}]);